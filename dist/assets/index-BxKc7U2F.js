(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function e(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=e(o);fetch(o.href,s)}})();const _t=Object.freeze({left:0,top:0,width:16,height:16}),$=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),_=Object.freeze({..._t,...$}),tt=Object.freeze({..._,body:"",hidden:!1}),he=Object.freeze({width:null,height:null}),Ut=Object.freeze({...he,...$});function de(i,t=0){const e=i.replace(/^-?[0-9.]*/,"");function n(o){for(;o<0;)o+=4;return o%4}if(e===""){const o=parseInt(i);return isNaN(o)?0:n(o)}else if(e!==i){let o=0;switch(e){case"%":o=25;break;case"deg":o=90}if(o){let s=parseFloat(i.slice(0,i.length-e.length));return isNaN(s)?0:(s=s/o,s%1===0?n(s):0)}}return t}const ue=/[\s,]+/;function fe(i,t){t.split(ue).forEach(e=>{switch(e.trim()){case"horizontal":i.hFlip=!0;break;case"vertical":i.vFlip=!0;break}})}const Bt={...Ut,preserveAspectRatio:""};function ut(i){const t={...Bt},e=(n,o)=>i.getAttribute(n)||o;return t.width=e("width",null),t.height=e("height",null),t.rotate=de(e("rotate","")),fe(t,e("flip","")),t.preserveAspectRatio=e("preserveAspectRatio",e("preserveaspectratio","")),t}function pe(i,t){for(const e in Bt)if(i[e]!==t[e])return!0;return!1}const Nt=/^[a-z0-9]+(-[a-z0-9]+)*$/,U=(i,t,e,n="")=>{const o=i.split(":");if(i.slice(0,1)==="@"){if(o.length<2||o.length>3)return null;n=o.shift().slice(1)}if(o.length>3||!o.length)return null;if(o.length>1){const r=o.pop(),c=o.pop(),l={provider:o.length>0?o[0]:n,prefix:c,name:r};return t&&!j(l)?null:l}const s=o[0],a=s.split("-");if(a.length>1){const r={provider:n,prefix:a.shift(),name:a.join("-")};return t&&!j(r)?null:r}if(e&&n===""){const r={provider:n,prefix:"",name:s};return t&&!j(r,e)?null:r}return null},j=(i,t)=>i?!!((t&&i.prefix===""||i.prefix)&&i.name):!1;function ge(i,t){const e=i.icons,n=i.aliases||Object.create(null),o=Object.create(null);function s(a){if(e[a])return o[a]=[];if(!(a in o)){o[a]=null;const r=n[a]&&n[a].parent,c=r&&s(r);c&&(o[a]=[r].concat(c))}return o[a]}return Object.keys(e).concat(Object.keys(n)).forEach(s),o}function me(i,t){const e={};!i.hFlip!=!t.hFlip&&(e.hFlip=!0),!i.vFlip!=!t.vFlip&&(e.vFlip=!0);const n=((i.rotate||0)+(t.rotate||0))%4;return n&&(e.rotate=n),e}function ft(i,t){const e=me(i,t);for(const n in tt)n in $?n in i&&!(n in e)&&(e[n]=$[n]):n in t?e[n]=t[n]:n in i&&(e[n]=i[n]);return e}function be(i,t,e){const n=i.icons,o=i.aliases||Object.create(null);let s={};function a(r){s=ft(n[r]||o[r],s)}return a(t),e.forEach(a),ft(i,s)}function jt(i,t){const e=[];if(typeof i!="object"||typeof i.icons!="object")return e;i.not_found instanceof Array&&i.not_found.forEach(o=>{t(o,null),e.push(o)});const n=ge(i);for(const o in n){const s=n[o];s&&(t(o,be(i,o,s)),e.push(o))}return e}const ye={provider:"",aliases:{},not_found:{},..._t};function Y(i,t){for(const e in t)if(e in i&&typeof i[e]!=typeof t[e])return!1;return!0}function qt(i){if(typeof i!="object"||i===null)return null;const t=i;if(typeof t.prefix!="string"||!i.icons||typeof i.icons!="object"||!Y(i,ye))return null;const e=t.icons;for(const o in e){const s=e[o];if(!o||typeof s.body!="string"||!Y(s,tt))return null}const n=t.aliases||Object.create(null);for(const o in n){const s=n[o],a=s.parent;if(!o||typeof a!="string"||!e[a]&&!n[a]||!Y(s,tt))return null}return t}const H=Object.create(null);function we(i,t){return{provider:i,prefix:t,icons:Object.create(null),missing:new Set}}function I(i,t){const e=H[i]||(H[i]=Object.create(null));return e[t]||(e[t]=we(i,t))}function $t(i,t){return qt(t)?jt(t,(e,n)=>{n?i.icons[e]=n:i.missing.add(e)}):[]}function ve(i,t,e){try{if(typeof e.body=="string")return i.icons[t]={...e},!0}catch{}return!1}function xe(i,t){let e=[];return(typeof i=="string"?[i]:Object.keys(H)).forEach(n=>{(typeof n=="string"&&typeof t=="string"?[t]:Object.keys(H[n]||{})).forEach(o=>{const s=I(n,o);e=e.concat(Object.keys(s.icons).map(a=>(n!==""?"@"+n+":":"")+o+":"+a))})}),e}let z=!1;function Ht(i){return typeof i=="boolean"&&(z=i),z}function O(i){const t=typeof i=="string"?U(i,!0,z):i;if(t){const e=I(t.provider,t.prefix),n=t.name;return e.icons[n]||(e.missing.has(n)?null:void 0)}}function Wt(i,t){const e=U(i,!0,z);if(!e)return!1;const n=I(e.provider,e.prefix);return t?ve(n,e.name,t):(n.missing.add(e.name),!0)}function pt(i,t){if(typeof i!="object")return!1;if(typeof t!="string"&&(t=i.provider||""),z&&!t&&!i.prefix){let n=!1;return qt(i)&&(i.prefix="",jt(i,(o,s)=>{Wt(o,s)&&(n=!0)})),n}const e=i.prefix;return j({prefix:e,name:"a"})?!!$t(I(t,e),i):!1}function Se(i){return!!O(i)}function ke(i){const t=O(i);return t&&{..._,...t}}function Dt(i,t){i.forEach(e=>{const n=e.loaderCallbacks;n&&(e.loaderCallbacks=n.filter(o=>o.id!==t))})}function Ie(i){i.pendingCallbacksFlag||(i.pendingCallbacksFlag=!0,setTimeout(()=>{i.pendingCallbacksFlag=!1;const t=i.loaderCallbacks?i.loaderCallbacks.slice(0):[];if(!t.length)return;let e=!1;const n=i.provider,o=i.prefix;t.forEach(s=>{const a=s.icons,r=a.pending.length;a.pending=a.pending.filter(c=>{if(c.prefix!==o)return!0;const l=c.name;if(i.icons[l])a.loaded.push({provider:n,prefix:o,name:l});else if(i.missing.has(l))a.missing.push({provider:n,prefix:o,name:l});else return e=!0,!0;return!1}),a.pending.length!==r&&(e||Dt([i],s.id),s.callback(a.loaded.slice(0),a.missing.slice(0),a.pending.slice(0),s.abort))})}))}let Ee=0;function Le(i,t,e){const n=Ee++,o=Dt.bind(null,e,n);if(!t.pending.length)return o;const s={id:n,icons:t,callback:i,abort:o};return e.forEach(a=>{(a.loaderCallbacks||(a.loaderCallbacks=[])).push(s)}),o}function Te(i){const t={loaded:[],missing:[],pending:[]},e=Object.create(null);i.sort((o,s)=>o.provider!==s.provider?o.provider.localeCompare(s.provider):o.prefix!==s.prefix?o.prefix.localeCompare(s.prefix):o.name.localeCompare(s.name));let n={provider:"",prefix:"",name:""};return i.forEach(o=>{if(n.name===o.name&&n.prefix===o.prefix&&n.provider===o.provider)return;n=o;const s=o.provider,a=o.prefix,r=o.name,c=e[s]||(e[s]=Object.create(null)),l=c[a]||(c[a]=I(s,a));let h;r in l.icons?h=t.loaded:a===""||l.missing.has(r)?h=t.missing:h=t.pending;const d={provider:s,prefix:a,name:r};h.push(d)}),t}const et=Object.create(null);function gt(i,t){et[i]=t}function nt(i){return et[i]||et[""]}function Ce(i,t=!0,e=!1){const n=[];return i.forEach(o=>{const s=typeof o=="string"?U(o,t,e):o;s&&n.push(s)}),n}function at(i){let t;if(typeof i.resources=="string")t=[i.resources];else if(t=i.resources,!(t instanceof Array)||!t.length)return null;return{resources:t,path:i.path||"/",maxURL:i.maxURL||500,rotate:i.rotate||750,timeout:i.timeout||5e3,random:i.random===!0,index:i.index||0,dataAfterTimeout:i.dataAfterTimeout!==!1}}const Q=Object.create(null),A=["https://api.simplesvg.com","https://api.unisvg.com"],q=[];for(;A.length>0;)A.length===1||Math.random()>.5?q.push(A.shift()):q.push(A.pop());Q[""]=at({resources:["https://api.iconify.design"].concat(q)});function mt(i,t){const e=at(t);return e===null?!1:(Q[i]=e,!0)}function X(i){return Q[i]}function Ae(){return Object.keys(Q)}const Re={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function Fe(i,t,e,n){const o=i.resources.length,s=i.random?Math.floor(Math.random()*o):i.index;let a;if(i.random){let g=i.resources.slice(0);for(a=[];g.length>1;){const S=Math.floor(Math.random()*g.length);a.push(g[S]),g=g.slice(0,S).concat(g.slice(S+1))}a=a.concat(g)}else a=i.resources.slice(s).concat(i.resources.slice(0,s));const r=Date.now();let c="pending",l=0,h,d=null,p=[],m=[];typeof n=="function"&&m.push(n);function y(){d&&(clearTimeout(d),d=null)}function v(){c==="pending"&&(c="aborted"),y(),p.forEach(g=>{g.status==="pending"&&(g.status="aborted")}),p=[]}function b(g,S){S&&(m=[]),typeof g=="function"&&m.push(g)}function E(){return{startTime:r,payload:t,status:c,queriesSent:l,queriesPending:p.length,subscribe:b,abort:v}}function k(){c="failed",m.forEach(g=>{g(void 0,h)})}function x(){p.forEach(g=>{g.status==="pending"&&(g.status="aborted")}),p=[]}function w(g,S,C){const B=S!=="success";switch(p=p.filter(L=>L!==g),c){case"pending":break;case"failed":if(B||!i.dataAfterTimeout)return;break;default:return}if(S==="abort"){h=C,k();return}if(B){h=C,p.length||(a.length?T():k());return}if(y(),x(),!i.random){const L=i.resources.indexOf(g.resource);L!==-1&&L!==i.index&&(i.index=L)}c="completed",m.forEach(L=>{L(C)})}function T(){if(c!=="pending")return;y();const g=a.shift();if(g===void 0){if(p.length){d=setTimeout(()=>{y(),c==="pending"&&(x(),k())},i.timeout);return}k();return}const S={status:"pending",resource:g,callback:(C,B)=>{w(S,C,B)}};p.push(S),l++,d=setTimeout(T,i.rotate),e(g,t,S.callback)}return setTimeout(T),E}function Gt(i){const t={...Re,...i};let e=[];function n(){e=e.filter(a=>a().status==="pending")}function o(a,r,c){const l=Fe(t,a,r,(h,d)=>{n(),c&&c(h,d)});return e.push(l),l}function s(a){return e.find(r=>a(r))||null}return{query:o,find:s,setIndex:a=>{t.index=a},getIndex:()=>t.index,cleanup:n}}function bt(){}const V=Object.create(null);function Pe(i){if(!V[i]){const t=X(i);if(!t)return;V[i]={config:t,redundancy:Gt(t)}}return V[i]}function Qt(i,t,e){let n,o;if(typeof i=="string"){const s=nt(i);if(!s)return e(void 0,424),bt;o=s.send;const a=Pe(i);a&&(n=a.redundancy)}else{const s=at(i);if(s){n=Gt(s);const a=nt(i.resources?i.resources[0]:"");a&&(o=a.send)}}return!n||!o?(e(void 0,424),bt):n.query(t,o,e)().abort}function yt(){}function ze(i){i.iconsLoaderFlag||(i.iconsLoaderFlag=!0,setTimeout(()=>{i.iconsLoaderFlag=!1,Ie(i)}))}function Oe(i){const t=[],e=[];return i.forEach(n=>{(n.match(Nt)?t:e).push(n)}),{valid:t,invalid:e}}function R(i,t,e){function n(){const o=i.pendingIcons;t.forEach(s=>{o&&o.delete(s),i.icons[s]||i.missing.add(s)})}if(e&&typeof e=="object")try{if(!$t(i,e).length){n();return}}catch(o){console.error(o)}n(),ze(i)}function wt(i,t){i instanceof Promise?i.then(e=>{t(e)}).catch(()=>{t(null)}):t(i)}function Me(i,t){i.iconsToLoad?i.iconsToLoad=i.iconsToLoad.concat(t).sort():i.iconsToLoad=t,i.iconsQueueFlag||(i.iconsQueueFlag=!0,setTimeout(()=>{i.iconsQueueFlag=!1;const{provider:e,prefix:n}=i,o=i.iconsToLoad;if(delete i.iconsToLoad,!o||!o.length)return;const s=i.loadIcon;if(i.loadIcons&&(o.length>1||!s)){wt(i.loadIcons(o,n,e),l=>{R(i,o,l)});return}if(s){o.forEach(l=>{wt(s(l,n,e),h=>{R(i,[l],h?{prefix:n,icons:{[l]:h}}:null)})});return}const{valid:a,invalid:r}=Oe(o);if(r.length&&R(i,r,null),!a.length)return;const c=n.match(Nt)?nt(e):null;if(!c){R(i,a,null);return}c.prepare(e,n,a).forEach(l=>{Qt(e,l,h=>{R(i,l.icons,h)})})}))}const ct=(i,t)=>{const e=Te(Ce(i,!0,Ht()));if(!e.pending.length){let r=!0;return t&&setTimeout(()=>{r&&t(e.loaded,e.missing,e.pending,yt)}),()=>{r=!1}}const n=Object.create(null),o=[];let s,a;return e.pending.forEach(r=>{const{provider:c,prefix:l}=r;if(l===a&&c===s)return;s=c,a=l,o.push(I(c,l));const h=n[c]||(n[c]=Object.create(null));h[l]||(h[l]=[])}),e.pending.forEach(r=>{const{provider:c,prefix:l,name:h}=r,d=I(c,l),p=d.pendingIcons||(d.pendingIcons=new Set);p.has(h)||(p.add(h),n[c][l].push(h))}),o.forEach(r=>{const c=n[r.provider][r.prefix];c.length&&Me(r,c)}),t?Le(t,e,o):yt},_e=i=>new Promise((t,e)=>{const n=typeof i=="string"?U(i,!0):i;if(!n){e(i);return}ct([n||i],o=>{if(o.length&&n){const s=O(n);if(s){t({..._,...s});return}}e(i)})});function vt(i){try{const t=typeof i=="string"?JSON.parse(i):i;if(typeof t.body=="string")return{...t}}catch{}}function Ue(i,t){if(typeof i=="object")return{data:vt(i),value:i};if(typeof i!="string")return{value:i};if(i.includes("{")){const s=vt(i);if(s)return{data:s,value:i}}const e=U(i,!0,!0);if(!e)return{value:i};const n=O(e);if(n!==void 0||!e.prefix)return{value:i,name:e,data:n};const o=ct([e],()=>t(i,e,O(e)));return{value:i,name:e,loading:o}}let Xt=!1;try{Xt=navigator.vendor.indexOf("Apple")===0}catch{}function Be(i,t){switch(t){case"svg":case"bg":case"mask":return t}return t!=="style"&&(Xt||i.indexOf("<a")===-1)?"svg":i.indexOf("currentColor")===-1?"bg":"mask"}const Ne=/(-?[0-9.]*[0-9]+[0-9.]*)/g,je=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function it(i,t,e){if(t===1)return i;if(e=e||100,typeof i=="number")return Math.ceil(i*t*e)/e;if(typeof i!="string")return i;const n=i.split(Ne);if(n===null||!n.length)return i;const o=[];let s=n.shift(),a=je.test(s);for(;;){if(a){const r=parseFloat(s);isNaN(r)?o.push(s):o.push(Math.ceil(r*t*e)/e)}else o.push(s);if(s=n.shift(),s===void 0)return o.join("");a=!a}}function qe(i,t="defs"){let e="";const n=i.indexOf("<"+t);for(;n>=0;){const o=i.indexOf(">",n),s=i.indexOf("</"+t);if(o===-1||s===-1)break;const a=i.indexOf(">",s);if(a===-1)break;e+=i.slice(o+1,s).trim(),i=i.slice(0,n).trim()+i.slice(a+1)}return{defs:e,content:i}}function $e(i,t){return i?"<defs>"+i+"</defs>"+t:t}function He(i,t,e){const n=qe(i);return $e(n.defs,t+n.content+e)}const We=i=>i==="unset"||i==="undefined"||i==="none";function Yt(i,t){const e={..._,...i},n={...Ut,...t},o={left:e.left,top:e.top,width:e.width,height:e.height};let s=e.body;[e,n].forEach(v=>{const b=[],E=v.hFlip,k=v.vFlip;let x=v.rotate;E?k?x+=2:(b.push("translate("+(o.width+o.left).toString()+" "+(0-o.top).toString()+")"),b.push("scale(-1 1)"),o.top=o.left=0):k&&(b.push("translate("+(0-o.left).toString()+" "+(o.height+o.top).toString()+")"),b.push("scale(1 -1)"),o.top=o.left=0);let w;switch(x<0&&(x-=Math.floor(x/4)*4),x=x%4,x){case 1:w=o.height/2+o.top,b.unshift("rotate(90 "+w.toString()+" "+w.toString()+")");break;case 2:b.unshift("rotate(180 "+(o.width/2+o.left).toString()+" "+(o.height/2+o.top).toString()+")");break;case 3:w=o.width/2+o.left,b.unshift("rotate(-90 "+w.toString()+" "+w.toString()+")");break}x%2===1&&(o.left!==o.top&&(w=o.left,o.left=o.top,o.top=w),o.width!==o.height&&(w=o.width,o.width=o.height,o.height=w)),b.length&&(s=He(s,'<g transform="'+b.join(" ")+'">',"</g>"))});const a=n.width,r=n.height,c=o.width,l=o.height;let h,d;a===null?(d=r===null?"1em":r==="auto"?l:r,h=it(d,c/l)):(h=a==="auto"?c:a,d=r===null?it(h,l/c):r==="auto"?l:r);const p={},m=(v,b)=>{We(b)||(p[v]=b.toString())};m("width",h),m("height",d);const y=[o.left,o.top,c,l];return p.viewBox=y.join(" "),{attributes:p,viewBox:y,body:s}}function lt(i,t){let e=i.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const n in t)e+=" "+n+'="'+t[n]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+e+">"+i+"</svg>"}function De(i){return i.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function Ge(i){return"data:image/svg+xml,"+De(i)}function Vt(i){return'url("'+Ge(i)+'")'}const Qe=()=>{let i;try{if(i=fetch,typeof i=="function")return i}catch{}};let W=Qe();function Xe(i){W=i}function Ye(){return W}function Ve(i,t){const e=X(i);if(!e)return 0;let n;if(!e.maxURL)n=0;else{let o=0;e.resources.forEach(a=>{o=Math.max(o,a.length)});const s=t+".json?icons=";n=e.maxURL-o-e.path.length-s.length}return n}function Ze(i){return i===404}const Je=(i,t,e)=>{const n=[],o=Ve(i,t),s="icons";let a={type:s,provider:i,prefix:t,icons:[]},r=0;return e.forEach((c,l)=>{r+=c.length+1,r>=o&&l>0&&(n.push(a),a={type:s,provider:i,prefix:t,icons:[]},r=c.length),a.icons.push(c)}),n.push(a),n};function Ke(i){if(typeof i=="string"){const t=X(i);if(t)return t.path}return"/"}const tn=(i,t,e)=>{if(!W){e("abort",424);return}let n=Ke(t.provider);switch(t.type){case"icons":{const s=t.prefix,a=t.icons.join(","),r=new URLSearchParams({icons:a});n+=s+".json?"+r.toString();break}case"custom":{const s=t.uri;n+=s.slice(0,1)==="/"?s.slice(1):s;break}default:e("abort",400);return}let o=503;W(i+n).then(s=>{const a=s.status;if(a!==200){setTimeout(()=>{e(Ze(a)?"abort":"next",a)});return}return o=501,s.json()}).then(s=>{if(typeof s!="object"||s===null){setTimeout(()=>{s===404?e("abort",s):e("next",o)});return}setTimeout(()=>{e("success",s)})}).catch(()=>{e("next",o)})},en={prepare:Je,send:tn};function nn(i,t,e){I(e||"",t).loadIcons=i}function on(i,t,e){I(e||"",t).loadIcon=i}const Z="data-style";let Zt="";function sn(i){Zt=i}function xt(i,t){let e=Array.from(i.childNodes).find(n=>n.hasAttribute&&n.hasAttribute(Z));e||(e=document.createElement("style"),e.setAttribute(Z,Z),i.appendChild(e)),e.textContent=":host{display:inline-block;vertical-align:"+(t?"-0.125em":"0")+"}span,svg{display:block;margin:auto}"+Zt}function Jt(){gt("",en),Ht(!0);let i;try{i=window}catch{}if(i){if(i.IconifyPreload!==void 0){const e=i.IconifyPreload,n="Invalid IconifyPreload syntax.";typeof e=="object"&&e!==null&&(e instanceof Array?e:[e]).forEach(o=>{try{(typeof o!="object"||o===null||o instanceof Array||typeof o.icons!="object"||typeof o.prefix!="string"||!pt(o))&&console.error(n)}catch{console.error(n)}})}if(i.IconifyProviders!==void 0){const e=i.IconifyProviders;if(typeof e=="object"&&e!==null)for(const n in e){const o="IconifyProviders["+n+"] is invalid.";try{const s=e[n];if(typeof s!="object"||!s||s.resources===void 0)continue;mt(n,s)||console.error(o)}catch{console.error(o)}}}}return{iconLoaded:Se,getIcon:ke,listIcons:xe,addIcon:Wt,addCollection:pt,calculateSize:it,buildIcon:Yt,iconToHTML:lt,svgToURL:Vt,loadIcons:ct,loadIcon:_e,addAPIProvider:mt,setCustomIconLoader:on,setCustomIconsLoader:nn,appendCustomStyle:sn,_api:{getAPIConfig:X,setAPIModule:gt,sendAPIQuery:Qt,setFetch:Xe,getFetch:Ye,listAPIProviders:Ae}}}const ot={"background-color":"currentColor"},Kt={"background-color":"transparent"},St={image:"var(--svg)",repeat:"no-repeat",size:"100% 100%"},kt={"-webkit-mask":ot,mask:ot,background:Kt};for(const i in kt){const t=kt[i];for(const e in St)t[i+"-"+e]=St[e]}function It(i){return i?i+(i.match(/^[-0-9.]+$/)?"px":""):"inherit"}function rn(i,t,e){const n=document.createElement("span");let o=i.body;o.indexOf("<a")!==-1&&(o+="<!-- "+Date.now()+" -->");const s=i.attributes,a=lt(o,{...s,width:t.width+"",height:t.height+""}),r=Vt(a),c=n.style,l={"--svg":r,width:It(s.width),height:It(s.height),...e?ot:Kt};for(const h in l)c.setProperty(h,l[h]);return n}let P;function an(){try{P=window.trustedTypes.createPolicy("iconify",{createHTML:i=>i})}catch{P=null}}function cn(i){return P===void 0&&an(),P?P.createHTML(i):i}function ln(i){const t=document.createElement("span"),e=i.attributes;let n="";e.width||(n="width: inherit;"),e.height||(n+="height: inherit;"),n&&(e.style=n);const o=lt(i.body,e);return t.innerHTML=cn(o),t.firstChild}function st(i){return Array.from(i.childNodes).find(t=>{const e=t.tagName&&t.tagName.toUpperCase();return e==="SPAN"||e==="SVG"})}function Et(i,t){const e=t.icon.data,n=t.customisations,o=Yt(e,n);n.preserveAspectRatio&&(o.attributes.preserveAspectRatio=n.preserveAspectRatio);const s=t.renderedMode;let a;s==="svg"?a=ln(o):a=rn(o,{..._,...e},s==="mask");const r=st(i);r?a.tagName==="SPAN"&&r.tagName===a.tagName?r.setAttribute("style",a.getAttribute("style")):i.replaceChild(a,r):i.appendChild(a)}function Lt(i,t,e){const n=e&&(e.rendered?e:e.lastRender);return{rendered:!1,inline:t,icon:i,lastRender:n}}function hn(i="iconify-icon"){let t,e;try{t=window.customElements,e=window.HTMLElement}catch{return}if(!t||!e)return;const n=t.get(i);if(n)return n;const o=["icon","mode","inline","noobserver","width","height","rotate","flip"],s=class extends e{_shadowRoot;_initialised=!1;_state;_checkQueued=!1;_connected=!1;_observer=null;_visible=!0;constructor(){super();const r=this._shadowRoot=this.attachShadow({mode:"open"}),c=this.hasAttribute("inline");xt(r,c),this._state=Lt({value:""},c),this._queueCheck()}connectedCallback(){this._connected=!0,this.startObserver()}disconnectedCallback(){this._connected=!1,this.stopObserver()}static get observedAttributes(){return o.slice(0)}attributeChangedCallback(r){switch(r){case"inline":{const c=this.hasAttribute("inline"),l=this._state;c!==l.inline&&(l.inline=c,xt(this._shadowRoot,c));break}case"noobserver":{this.hasAttribute("noobserver")?this.startObserver():this.stopObserver();break}default:this._queueCheck()}}get icon(){const r=this.getAttribute("icon");if(r&&r.slice(0,1)==="{")try{return JSON.parse(r)}catch{}return r}set icon(r){typeof r=="object"&&(r=JSON.stringify(r)),this.setAttribute("icon",r)}get inline(){return this.hasAttribute("inline")}set inline(r){r?this.setAttribute("inline","true"):this.removeAttribute("inline")}get observer(){return this.hasAttribute("observer")}set observer(r){r?this.setAttribute("observer","true"):this.removeAttribute("observer")}restartAnimation(){const r=this._state;if(r.rendered){const c=this._shadowRoot;if(r.renderedMode==="svg")try{c.lastChild.setCurrentTime(0);return}catch{}Et(c,r)}}get status(){const r=this._state;return r.rendered?"rendered":r.icon.data===null?"failed":"loading"}_queueCheck(){this._checkQueued||(this._checkQueued=!0,setTimeout(()=>{this._check()}))}_check(){if(!this._checkQueued)return;this._checkQueued=!1;const r=this._state,c=this.getAttribute("icon");if(c!==r.icon.value){this._iconChanged(c);return}if(!r.rendered||!this._visible)return;const l=this.getAttribute("mode"),h=ut(this);(r.attrMode!==l||pe(r.customisations,h)||!st(this._shadowRoot))&&this._renderIcon(r.icon,h,l)}_iconChanged(r){const c=Ue(r,(l,h,d)=>{const p=this._state;if(p.rendered||this.getAttribute("icon")!==l)return;const m={value:l,name:h,data:d};m.data?this._gotIconData(m):p.icon=m});c.data?this._gotIconData(c):this._state=Lt(c,this._state.inline,this._state)}_forceRender(){if(!this._visible){const r=st(this._shadowRoot);r&&this._shadowRoot.removeChild(r);return}this._queueCheck()}_gotIconData(r){this._checkQueued=!1,this._renderIcon(r,ut(this),this.getAttribute("mode"))}_renderIcon(r,c,l){const h=Be(r.data.body,l),d=this._state.inline;Et(this._shadowRoot,this._state={rendered:!0,icon:r,inline:d,customisations:c,attrMode:l,renderedMode:h})}startObserver(){if(!this._observer&&!this.hasAttribute("noobserver"))try{this._observer=new IntersectionObserver(r=>{const c=r.some(l=>l.isIntersecting);c!==this._visible&&(this._visible=c,this._forceRender())}),this._observer.observe(this)}catch{if(this._observer){try{this._observer.disconnect()}catch{}this._observer=null}}}stopObserver(){this._observer&&(this._observer.disconnect(),this._observer=null,this._visible=!0,this._connected&&this._forceRender())}};o.forEach(r=>{r in s.prototype||Object.defineProperty(s.prototype,r,{get:function(){return this.getAttribute(r)},set:function(c){c!==null?this.setAttribute(r,c):this.removeAttribute(r)}})});const a=Jt();for(const r in a)s[r]=s.prototype[r]=a[r];return t.define(i,s),s}const dn=hn()||Jt(),{iconLoaded:fi,getIcon:pi,listIcons:gi,addIcon:mi,addCollection:bi,calculateSize:yi,buildIcon:wi,iconToHTML:vi,svgToURL:xi,loadIcons:Si,loadIcon:ki,setCustomIconLoader:Ii,setCustomIconsLoader:Ei,addAPIProvider:Li,_api:Ti}=dn,un=":host{display:flex;position:relative;justify-content:center;align-items:stretch}.bottom-img{max-width:100%;max-height:100%;-o-object-fit:contain;object-fit:contain}.top-img{position:absolute;-webkit-mask-image:linear-gradient(90deg,rgb(0 0 0 / 0%) 35%,rgb(255 255 255 / 100%) 50%,rgb(0 0 0 / 0%) 65%);mask-image:linear-gradient(90deg,#0000 35%,#fff,#0000 65%);-webkit-mask-size:300% 100%;mask-size:300% 100%;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;filter:brightness(1.8);animation-duration:4s;animation-timing-function:linear;animation-iteration-count:infinite;animation-name:flicker;max-width:100%;max-height:100%}@keyframes flicker{0%{-webkit-mask-position:150% 0%;mask-position:150% 0%}30%{-webkit-mask-position:-150% 0%;mask-position:-150% 0%}to{-webkit-mask-position:-150% 0%;mask-position:-150% 0%}}",fn=`<img class="bottom-img" src="./images/luffy.png" alt="luffy avatar" />
<img class="top-img" src="./images/luffy.png" alt="luffy avatar" />
`,pn="luffy-logo",te=document.createElement("template");te.innerHTML=fn;class gn extends HTMLElement{constructor(){super();const t=this.attachShadow({mode:"open"}),e=document.createElement("style");e.textContent=un,t.append(e,te.content.cloneNode(!0))}}customElements.define(pn,gn);const mn=":host{--slider-thumb-size: 2em;display:flex;position:relative}.slider{-webkit-appearance:none;-moz-appearance:none;appearance:none;outline:none;background:transparent;width:100%;height:2.5em;font-size:inherit}.slider::-webkit-slider-runnable-track{box-shadow:0 0 .125em .0625em #000c;border:.0625em solid rgb(0 0 0 / 50%);border-radius:.1em;background-color:var(--theme-color);height:.75em}.slider::-moz-range-track{box-shadow:0 0 .125em .0625em #000c;border:.0625em solid rgb(0 0 0 / 50%);border-radius:.1em;background-color:var(--theme-color);height:.75em}.slider::-webkit-slider-thumb{position:relative;top:-.75em;-webkit-appearance:none;appearance:none;filter:var(--element-filter);-webkit-transition:filter .05s;transition:filter .05s;cursor:pointer;border:0;background:url("+new URL("../images/slider-thumb.png",import.meta.url).href+");background-position:center;background-size:cover;background-repeat:no-repeat;background-color:transparent;width:var(--slider-thumb-size);height:var(--slider-thumb-size)}.slider::-moz-range-thumb{position:relative;top:-.75em;filter:var(--element-filter);cursor:pointer;border:0;background:url("+new URL("../images/slider-thumb.png",import.meta.url).href+");background-position:center;background-size:cover;background-repeat:no-repeat;background-color:transparent;width:var(--slider-thumb-size);height:var(--slider-thumb-size)}.slider::-webkit-slider-thumb:hover{filter:var(--element-hover-filter)}.thumb-text-wrapper{display:flex;position:absolute;top:31%;justify-content:center;align-items:center;width:var(--slider-thumb-size);pointer-events:none;color:#fff}.thumb-text-wrapper span{font-size:.75em}",bn=`<input class="slider" type="range" />
<div class="thumb-text-wrapper">
  <span id="thumbText"></span>
</div>
`,yn="range-slider",wn=["value","max","min","step"],ee=document.createElement("template");ee.innerHTML=bn;const vn=6.5,xn=13;class Sn extends HTMLElement{#t;#e;constructor(){super();const t=this.attachShadow({mode:"open"}),e=document.createElement("style");e.textContent=mn,t.append(e,ee.content.cloneNode(!0)),this.#t=t.querySelector("input"),this.#e=t.querySelector("#thumbText"),this.#t.addEventListener("input",()=>this.#n())}#n(){const t=parseFloat(this.#t.max),e=parseFloat(this.#t.min),o=(parseFloat(this.#t.value)-e)/(t-e)*100;this.#e.innerText=this.value;const s=-o+(vn-xn*o/100),a=this.#e.parentElement;a.style.left=o+"%",a.style.transform=`translateX(${s}%)`}get value(){return this.#t.value}set value(t){this.#t.value=t,this.#e.innerText=t,this.#n()}static get observedAttributes(){return wn}attributeChangedCallback(t,e,n){t==="value"?this.value=n:this.#t.setAttribute(t,n)}}customElements.define(yn,Sn);const Tt=""+new URL("circle-button-QXg8_EbK.png",import.meta.url).href,kn=":host{--filter: drop-shadow(.125em 0 .125em rgb(0 0 0 / 40%)) drop-shadow(-.125em 0 .125em rgb(0 0 0 / 40%)) contrast(100%) brightness(100%);--hover-filter: drop-shadow(.1875em 0 .1875em rgb(0 0 0 / 40%)) drop-shadow(-.1875em 0 .1875em rgb(0 0 0 / 50%)) contrast(105%) brightness(105%);--active-filter: drop-shadow(.0625em 0 .125em rgb(0 0 0 / 60%)) drop-shadow(-.0625em 0 .125em rgb(0 0 0 / 70%)) contrast(105%) brightness(105%);display:flex;justify-content:center;align-items:center;filter:var(--filter);transition:.1s;cursor:pointer;outline:none;border:0;background-position:center;background-size:cover;background-repeat:no-repeat;background-color:transparent;padding-bottom:.05em;width:2em;height:2em;color:#fff}:host(:hover){filter:var(--hover-filter)}:host(:active){transform:translateY(.0625em);filter:var(--active-filter)}iconify-icon{pointer-events:none}",In=`<iconify-icon part="icon"></iconify-icon>
`,En="icon-button",Ln=["icon","mode","flip","height","width","inline","preserveAspectRatio","rotate"],ne=document.createElement("template");ne.innerHTML=In;class Tn extends HTMLElement{#t;constructor(){super();const t=this.attachShadow({mode:"open"}),e=document.createElement("style");e.textContent=kn,t.append(e,ne.content.cloneNode(!0)),t.querySelector("img")?.setAttribute("src",Tt),this.#t=t.querySelector("iconify-icon")}static get observedAttributes(){return Ln}connectedCallback(){this.style.backgroundImage=`url(${Tt})`}attributeChangedCallback(t,e,n){this.#t.setAttribute(t,n)}}customElements.define(En,Tn);const Cn=":host{display:grid;grid-template-columns:1fr auto;align-items:center;gap:1rem}select{flex-grow:1;box-shadow:0 0 .25em #0000007f;border:0;border:1px solid #3b230e;background:linear-gradient(120deg,#f5c65f,#f5da9e,#f5c660);padding:.25em;width:100%;color:#3b230e;font-size:1rem;text-overflow:ellipsis;white-space:nowrap}select:focus-visible{outline:none}option{background-color:#f5da9e}#file-input{display:none}::-webkit-scrollbar{width:.2rem}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{border-radius:.1rem;background:#3b230e}::-webkit-scrollbar-corner{background:transparent}",An=`<select></select>
<icon-button
  icon="mingcute:add-fill"
  title="Add new font"
  aria-label="Add new font"
></icon-button>
<input id="file-input" type="file" accept=".otf,.sfnt,.ttf,.woff,.woff2" />
`,Rn="font-select",Fn=["value"],ie=document.createElement("template");ie.innerHTML=An;class Pn extends HTMLElement{#t;#e;#n;#o=new Set;#i=null;#c=!1;constructor(){super();const t=this.attachShadow({mode:"open"}),e=document.createElement("style");e.textContent=Cn,t.append(e,ie.content.cloneNode(!0)),this.#t=t.querySelector("select"),this.#t.addEventListener("input",()=>{this.#t.style.fontFamily=this.#t.value}),this.#t.addEventListener("click",()=>{this.#r()}),this.#e=t.querySelector("icon-button"),this.#n=t.querySelector("#file-input"),this.#e.addEventListener("click",()=>{this.#n.click()}),this.#n.addEventListener("input",async o=>{o.stopImmediatePropagation();const s=this.#n.files?this.#n.files[0]:null;if(!s)return;const a=URL.createObjectURL(s),r=s.name.split(".")[0],c=new FontFace(r,`url(${a})`);try{await c.load(),document.fonts.add(c),this.#a(r),this.value=r,this.dispatchEvent(new CustomEvent("input"))}catch{}});const n=new Set;Array.from(document.fonts).forEach(o=>n.add(o.family)),this.#h(n),document.fonts.addEventListener("loadingdone",()=>{document.fonts.forEach(o=>{this.#o.has(o.family)||(this.#a(o.family),o.family===this.#i&&(this.value=this.#i,this.#i=null))})})}async#r(){if(!(!window.queryLocalFonts||this.#c))try{const t=await window.queryLocalFonts(),e=new Set;for(const n of t)e.add(n.family);await this.#h(e),this.#c=!0}catch(t){console.error(t)}}#a(t){this.#o.add(t);const e=this.#p(t);this.#t.appendChild(e)}async#h(t){const e=Array.from(t),n=5,o=Math.ceil(e.length/n);for(let s=0;s<o;s++){const a=new DocumentFragment,r=s*n,c=Math.min((s+1)*n,e.length);for(let l=r;l<c;l++){const h=e[l];if(this.#o.has(h))continue;this.#o.add(h);const d=this.#p(h);a.appendChild(d)}this.#t.appendChild(a),await new Promise(l=>{setTimeout(()=>l(),20)})}}#p(t){const e=document.createElement("option");return e.value=t,e.innerText=t,e.style.fontFamily=t,e}get value(){return this.#t.value}set value(t){this.#t.style.fontFamily=t,this.#t.value=t,this.#i=this.#o.has(t)?null:t}static get observedAttributes(){return Fn}attributeChangedCallback(t,e,n){t==="value"&&(this.value=n)}}customElements.define(Rn,Pn);const zn=":host{display:inline-flex;position:relative;justify-content:center;filter:contrast(100%) brightness(100%) drop-shadow(1px 1px 1px rgb(0 0 0 / 50%)) drop-shadow(-1px -1px 1px rgb(0 0 0 / 50%));transition:.05s;cursor:pointer;outline:none;background-color:transparent;width:4.25rem;height:5rem}:host(:hover:not([loading])){filter:contrast(105%) brightness(105%) drop-shadow(1px 4px 3px rgb(0 0 0 / 50%)) drop-shadow(-1px 0 3px rgb(0 0 0 / 50%))}:host(:active:not([loading])){transform:translateY(1px);filter:contrast(105%) brightness(105%) drop-shadow(1px 2px 1px rgb(0 0 0 / 60%)) drop-shadow(-1px 0 1px rgb(0 0 0 / 60%))}.img{position:absolute;max-width:100%;max-height:100%}.icon{display:flex;position:absolute;top:21%;justify-content:center;align-items:center;box-sizing:border-box;width:82%;height:44%;color:#513721;font-size:1.5rem}iconify-icon{display:none}:host([loading]){cursor:wait}:host([loading]) iconify-icon{display:inline}.text{display:flex;position:absolute;bottom:12%;justify-content:center;align-items:center;box-sizing:border-box;width:85%;height:20%;overflow:hidden;color:#513721;font-weight:900;font-size:.9rem;font-family:Scheherazade New,serif;text-align:justify;white-space:nowrap}",On=`<img class="img" alt="button image" />
<div class="icon">
  <slot name="icon"></slot>
  <iconify-icon icon="eos-icons:loading"></iconify-icon>
</div>
<span class="text">
  <slot></slot>
</span>
`,Mn=""+new URL("wanted-Cl_9I3-f.png",import.meta.url).href,_n="wanted-button",Un=["font-size"],oe=document.createElement("template");oe.innerHTML=On;class Bn extends HTMLElement{#t;#e;constructor(){super();const t=this.attachShadow({mode:"open"});this.#t=t;const e=document.createElement("style");e.textContent=zn,t.append(e,oe.content.cloneNode(!0)),t.querySelector("img")?.setAttribute("src",Mn),this.#e=t.querySelector("span.text")}static get observedAttributes(){return Un}set loading(t){const e=this.#t.querySelector("slot[name=icon]");e&&(e.style.display=t?"none":"contents"),t?this.setAttribute("loading",""):this.removeAttribute("loading")}get loading(){return this.hasAttribute("loading")}attributeChangedCallback(t,e,n){t==="font-size"&&(this.#e.style.fontSize=n)}}customElements.define(_n,Bn);const Nn=":host{display:block;position:fixed;top:0;left:0;visibility:hidden;opacity:0;filter:drop-shadow(0 0 5px rgb(0 0 0 / 60%));transition:.2s;box-sizing:border-box;margin-top:3rem;margin-left:.5rem;background-image:url("+new URL("../images/tips-paper.png",import.meta.url).href+');background-size:contain;background-repeat:no-repeat;padding:1rem .8rem 1rem 1rem;width:17.62rem;max-width:100vw;height:26.33rem;color:var(--dark-text-color);font-size:.8rem}:host([open]){visibility:visible;opacity:1}.content{height:100%;overflow:auto}.content h3{border-bottom:1px solid var(--dark-text-color)}.content *{margin-block:.5em 1em}a{position:relative;outline:none;text-decoration:none}a:after{position:absolute;bottom:0;left:0;border-bottom:.2rem solid rgb(211 255 77 / 50%);width:100%;height:1px;content:" "}a:link{color:#009637}a:visited{color:#558f6a}::-webkit-scrollbar{width:.1rem}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{border-radius:.1rem;background:var(--dark-text-color)}::-webkit-scrollbar-corner{background:transparent}',jn=`<div class="content">
  <h3>Import image as the wanted photo</h3>
  <p>
    Click <b>IMPORT</b> button to choose an image from your device storage, or
    drag and drop the image anywhere on this page.
  </p>

  <h3>Adjust the position of the photo</h3>
  <p>
    After importing the image, click(or touch) and drag the photo to adjust the
    position.
  </p>

  <h3>Resize the imported photo</h3>
  <p>
    - Move the cursor over the photo, and scroll the mouse wheel to zoom in or
    zoom out.
  </p>
  <p>
    - Move the cursor over the red border around the photo and drag it to
    resize.
  </p>
  <p>
    - For the touch screen device, touch two fingers on the top of the photo,
    and move them apart to zoom in, or together to zoom out.
  </p>

  <h3>Name and Bounty</h3>
  <p>
    Click <b>EDIT</b> button to open the edit panel, there are text input fields
    inside the <b>Name</b> and
    <b>Bounty</b>
    section.
  </p>
  <p>
    You can input any text for both of them, however if you input a number in
    the bounty text field, the Belly sign will be rendered in the front of the
    bounty text on the poster, and also automatically insert decimal commas for
    the bounty.
  </p>

  <h3>Install this app on your device</h3>
  <p>
    <b>NOTE: For now, only Chrome and Edge support this feature.</b>
  </p>
  <p>
    This web application support
    <a href="https://en.wikipedia.org/wiki/Progressive_web_app" target="_blank"
      >PWA</a
    >, which means you can install it as a native app on your device, and launch
    it directly without opening the browser.
  </p>
  <p>
    Check out the
    <a
      href="https://support.google.com/chrome/answer/9658361?hl=en&co=GENIE.Platform%3DDesktop"
      target="_blank"
      >installation guide</a
    >.
  </p>
</div>
`,qn="tips-dialog",se=document.createElement("template");se.innerHTML=jn;class $n extends HTMLElement{constructor(){super();const t=this.attachShadow({mode:"open"}),e=document.createElement("style");e.textContent=Nn,t.append(e,se.content.cloneNode(!0))}toggle(){this.hasAttribute("open")?this.removeAttribute("open"):this.setAttribute("open","")}}customElements.define(qn,$n);const Hn=""+new URL("belly-Cfr58nJZ.png",import.meta.url).href,Wn=""+new URL("one-piece-wanted-7U7mbUQi.png",import.meta.url).href,J={imageUrl:Wn,bellyImageUrl:Hn,photoPosition:{x:74,y:252,width:638,height:484},namePosition:{x:87,y:826,width:586,height:114},bountyInfo:{x:82,y:958,width:592,height:85,bellyMarginRight:18,fontSize:52.5},boundaryOffset:{left:10,right:10,top:10,bottom:10}},Dn=":host{display:block;width:100%;height:100%;touch-action:none}.container{display:flex;position:relative;justify-content:center;align-items:center;box-sizing:border-box;width:100%;height:100%}";function D(i){return new Promise((t,e)=>{const n=new Image;n.setAttribute("crossorigin","anonymous"),n.onload=()=>t(n),n.onerror=e,n.src=i})}function ht(i,t,e,n){const o=i/e,s=t/n;return Math.min(s,o)}class dt{x=0;y=0;width=0;height=0;ctx;constructor(t){this.ctx=t}scale(t){this.x=this.x*t,this.y=this.y*t,this.width=this.width*t,this.height=this.height*t}}class re extends dt{#t="";#e=0;formattedText="";align="center";baseline="top";fontSize=0;fontWeight=400;fontFamily="serif";set text(t){this.#t=t,this.formattedText=this.formatText(t,this.#e)}get text(){return this.#t}set spacing(t){this.#e=t,this.formattedText=this.formatText(this.#t,t)}get spacing(){return this.#e}formatSpacing(t,e){let n="";for(let o=0;o<e;o++)n+=" ";return Array.from(t).join(n)}formatText(t,e=0){return this.formatSpacing(t,e)}getTextActualHeight(t){const{actualBoundingBoxAscent:e,actualBoundingBoxDescent:n}=this.ctx.measureText(t);return e+n}beforeRenderText(){}#n(t=this.x,e=this.y,n=this.width){this.ctx.fillStyle="rgba(0,0,0,0.78)",this.ctx.globalCompositeOperation="soft-light",this.ctx.fillText(this.formattedText,t,e,n),this.ctx.fillText(this.formattedText,t,e,n),this.ctx.fillText(this.formattedText,t,e,n),this.ctx.fillStyle="rgba(84,60,48,1)",this.ctx.globalCompositeOperation="color",this.ctx.fillText(this.formattedText,t,e,n)}render(){this.ctx.save(),this.ctx.textAlign=this.align,this.ctx.textBaseline=this.baseline;const{x:t,y:e,maxWidth:n}=this.beforeRenderText()??{};this.#n(t,e,n),this.ctx.restore()}}class Ct extends re{#t=!0;#e=new Intl.NumberFormat;#n=null;#o=1;#i=0;fontScale=1;verticalOffset=0;async loadBellyImage(t){try{this.#n=await D(t)}catch(e){throw console.error(e),new Error("Failed to init bounty.")}}setBountyInfo(t,e){const{x:n,y:o,width:s,height:a,bellyMarginRight:r,fontSize:c}=t;this.x=n,this.y=o,this.width=s,this.height=a,this.fontSize=c,this.#i=r,this.#o=e}formatText(t,e=0){const n=Number.parseFloat(t);if(Number.isNaN(n))return this.#t=!1,this.formatSpacing(t,e);this.#t=!0;const o=this.#e.format(n)+"-";return this.formatSpacing(o,e)}beforeRenderText(){if(!this.#n)return;const t=this.#n.width*this.#o,e=this.#n.height*this.#o;this.ctx.textAlign="center",this.ctx.textBaseline="top",this.ctx.font=`${this.fontWeight} ${this.fontSize*this.fontScale}px ${this.fontFamily}, serif`;const n=this.x+this.width/2,o=this.#t?t+this.#i:0,s=this.getTextActualHeight(this.formattedText),a=(this.height-s)/2+this.verticalOffset*this.#o,r=n+o/2,c=this.y+a,l=this.width-o;if(this.#t){const h=Math.min(this.ctx.measureText(this.formattedText).width,l),d=n-o/2-h/2;this.ctx.globalCompositeOperation="darken",this.ctx.drawImage(this.#n,d,this.y,t,e)}return{x:r,y:c,maxWidth:l}}}class At extends re{#t=1.6;setPosition(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this.fontSize=this.height*this.#t}beforeRenderText(){this.ctx.font=`700 ${this.fontSize}px 'Scheherazade New', serif`;const t=this.getTextActualHeight(this.formattedText),e=this.height/t,n=(t-this.height)/2;this.ctx.font=`700 ${Math.floor(this.fontSize*e)}px 'Scheherazade New', serif`;const o=this.x+this.width/2,s=this.y+n;return{x:o,y:s,maxWidth:this.width}}}const Gn=""+new URL("paper-B4NDpzrd.png",import.meta.url).href,Rt={x:0,y:0,width:0,height:0};class Ft extends dt{filter="";shadow=0;#t=1;#e=new Map;#n=null;#o=null;#i={...Rt};#c={...Rt};#r={left:0,right:0,top:0,bottom:0};async init(t,e){try{this.setBoundary(t,e);const n=await D(Gn);this.#o=this.ctx.createPattern(n,"repeat")}catch(n){throw console.error(n),new Error("Failed to create fill pattern.")}}async loadImage(t){if(t)try{this.#n=await D(t),this.#a(),this.#e.get("imageloaded")?.forEach(e=>e())}catch(e){throw console.error(e),new Error("Failed to load photo image.")}}#a(){this.x=this.#i.x,this.y=this.#i.y,this.width=this.#i.width,this.height=this.#i.height,this.#r={...this.#r},this.#i={x:this.x,y:this.y,width:this.width,height:this.height},this.updateRenderPosition()}scale(t){super.scale(t),this.updateRenderPosition()}setBoundary(t,e){this.#i={...t},this.#r={...e}}updateRenderPosition(){if(!this.#n)return;const t=ht(this.width,this.height,this.#n.width,this.#n.height),e=this.#n.width*t,n=this.#n.height*t,o=this.x+(this.width-e)/2,s=this.y+(this.height-n)/2;this.#c={x:o,y:s,width:e,height:n},this.#t=t}on(t,e){this.#e.has(t)||this.#e.set(t,[]),this.#e.get(t)?.push(e)}off(t,e){const n=this.#e.get(t);if(!n)return;const o=n.findIndex(s=>s===e);n.splice(o,1)}render(){if(this.ctx.save(),this.ctx.shadowColor="rgba(0, 0, 0, 1)",this.ctx.shadowBlur=this.shadow*this.#t,this.ctx.fillStyle=this.#o?this.#o:"none",this.ctx.fillRect(this.#i.x,this.#i.y,this.#i.width,this.#i.height),!this.#n){this.ctx.restore();return}const{x:t,y:e,width:n,height:o}=this.#c;this.ctx.filter=this.filter,this.ctx.drawImage(this.#n,t,e,n,o);const{left:s,right:a,top:r,bottom:c}=this.#r;t<=s&&this.ctx.clearRect(0,e,s,o),e<=r&&this.ctx.clearRect(t,0,n,r),t+n>this.ctx.canvas.domWidth-a&&this.ctx.clearRect(this.ctx.canvas.domWidth-a,e,a,o),e+o>this.ctx.canvas.domHeight-c&&this.ctx.clearRect(t,this.ctx.canvas.domHeight-c,n,c),this.ctx.restore()}}const Pt=4,zt=[10,5];class Qn extends dt{#t;#e=!1;#n=!1;#o=!1;#i=!1;#c=Pt;#r=zt;#a=null;#h=0;#p=0;#u=new Map;#d=0;#m=0;#s=0;constructor(t,e){super(t),this.#t=e,e.on("imageloaded",()=>this.reset()),t.canvas.addEventListener("mouseover",this.#f.bind(this),{passive:!0}),t.canvas.addEventListener("mouseout",this.#y.bind(this),{passive:!0}),t.canvas.addEventListener("wheel",this.#g.bind(this),{passive:!0}),t.canvas.addEventListener("pointerdown",this.#w.bind(this),{passive:!0}),t.canvas.addEventListener("pointerup",this.#b.bind(this),{passive:!0}),t.canvas.addEventListener("pointercancel",this.#l.bind(this),{passive:!0}),t.canvas.addEventListener("pointermove",this.#E.bind(this),{passive:!0}),t.canvas.addEventListener("pointerout",this.#L.bind(this),{passive:!0})}set borderScale(t){this.#c=Pt*t,this.#r=zt.map(e=>e*t)}set highlight(t){this.#e=t}scale(t){super.scale(t),this.#t.scale(t)}reset(){this.x=this.#t.x,this.y=this.#t.y,this.width=this.#t.width,this.height=this.#t.height,this.#n=!1,this.#o=!1,this.#i=!1}#g(t){const e=t.deltaY>0?.95:1.05;this.#I(e)}#f(){const{left:t,top:e}=this.ctx.canvas.getBoundingClientRect();this.#h=e,this.#p=t}#y(){this.#n=!1}#v(t){const e=t.clientX-this.#p,n=t.clientY-this.#h;if(this.#o){const o=t.clientX-this.#m,s=t.clientY-this.#s;this.#A(o,s)}this.#i||this.#T(e,n),this.#x(e,n,this.x,this.y,this.width,this.height,this.#c)?(this.#n=!0,this.#e=!1):this.#n=!1,this.#m=t.clientX,this.#s=t.clientY}#w(t){if(this.#e=!1,t.pointerType==="mouse"&&t.button===0){this.#o=!0;return}this.#u.set(t.pointerId,t);const{left:e,top:n}=this.ctx.canvas.getBoundingClientRect();let o=!1;for(const s of this.#u.values()){const a=s.clientX-e,r=s.clientY-n;if(this.#x(a,r,this.x,this.y,this.width,this.height,this.#c)){o=!0;break}}this.#n=o}#b(t){if(t.pointerType==="mouse"&&t.button===0){this.#o=!1,this.#i=!1;return}this.#S(t)}#l(t){this.#S(t)}#E(t){if(t.pointerType==="mouse"){this.#v(t);return}const e=Array.from(this.#u.values());if(e.length===1&&this.#n){const n=e[0],{clientX:o,clientY:s}=t,a=this.#u.get(n.pointerId);if(a){const r=o-a.clientX,c=s-a.clientY;this.x+=r,this.y+=c,this.#t.x+=r,this.#t.y+=c,this.#t.updateRenderPosition()}}if(e.length===2&&this.#n){const n=this.#u.get(e[0].pointerId),o=this.#u.get(e[1].pointerId);if(n&&o){const s=e[0].pointerId===t.pointerId?e[1]:e[0],a=this.#k(s,t),r=this.#k(n,o),c=a>r?1.02:.98;this.#I(c)}}this.#u.set(t.pointerId,t)}#L(t){t.pointerType==="mouse"&&(this.#o=!1,this.#i=!1)}#x(t,e,n,o,s,a,r=0){const c=r/2,l=n-c,h=o-c,d=n+s+c,p=o+a+c,m=t>=l&&t<=d,y=e>=h&&e<=p;return m&&y}#S(t){this.#u.delete(t.pointerId),this.#u.size||(this.#n=!1)}#k(t,e){const n=Math.abs(t.clientX-e.clientX),o=Math.abs(t.clientY-e.clientY);return Math.pow(n,2)+Math.pow(o,2)}#I(t){const e=this.width*t-this.width,n=this.height*t-this.height;this.x=this.x-e/2,this.width=this.width+e,this.y=this.y-n/2,this.height=this.height+n,this.#t.x=this.x,this.#t.y=this.y,this.#t.width=this.width,this.#t.height=this.height,this.#t.updateRenderPosition()}#T(t,e){const n=this.#C(t,e,this.x,this.y,this.width,this.height,this.#c);n.left||n.right?(this.ctx.canvas.style.cursor="ew-resize",this.#a=n.left?"left":"right"):n.top||n.bottom?(this.ctx.canvas.style.cursor="ns-resize",this.#a=n.top?"top":"bottom"):this.#n?this.ctx.canvas.style.cursor="move":this.ctx.canvas.style.cursor="default"}#C(t,e,n,o,s,a,r=0){const c=r/2,l=n-c,h=o-c,d=n+s+c,p=o+a+c,m=n+c,y=o+c,v=n+s-c,b=o+a-c;return{left:t>=l&&t<=m,right:t>=v&&t<=d,top:e>=h&&e<=y,bottom:e>=b&&e<=p}}#A(t,e){switch(this.ctx.canvas.style.cursor){case"move":this.x+=t,this.y+=e,this.#t.x+=t,this.#t.y+=e,this.#t.updateRenderPosition();break;case"ew-resize":{if(this.#i=!0,this.#a==="right"){const n=Math.max(this.width+t,1);this.width=n,this.#t.width=n}else{const n=this.x+t;if(n>=this.x+this.width)break;const o=this.width-t;this.x=n,this.#t.x=n,this.width=o,this.#t.width=o}this.#t.updateRenderPosition();break}case"ns-resize":{if(this.#i=!0,this.#a==="bottom"){const n=Math.max(this.height+e,1);this.height=n,this.#t.height=n}else{const n=this.y+e;if(n>=this.y+this.height)break;const o=this.height-e;this.y=n,this.#t.y=n,this.height=o,this.#t.height=o}this.#t.updateRenderPosition()}}}render(){!this.#n&&!this.#i&&!this.#e||(this.ctx.save(),this.#d++,this.#d>=this.#r[0]+this.#r[1]&&(this.#d=0),this.ctx.lineDashOffset=-this.#d,this.ctx.fillStyle="rgba(255,255,255,0.5)",this.ctx.strokeStyle="red",this.ctx.lineWidth=this.#c,this.ctx.setLineDash(this.#r),this.ctx.fillRect(this.x,this.y,this.width,this.height),this.ctx.strokeRect(this.x,this.y,this.width,this.height),this.ctx.restore())}}class Ot{#t;#e;#n=0;#o=1;#i=null;#c;constructor(t,e){this.#t=t,this.#e=t.canvas,this.#c=e}async loadImage(){let t;try{t=await D(this.#c.imageUrl),this.#i=t}catch(e){throw console.error(e),new Error("Failed to load wanted image.")}return t}get imageScale(){return this.#o}setSize({width:t,height:e,shadowSize:n,quality:o}){if(!this.#i)throw new Error("Failed to set size: wanted image is null");const s=this.#i.width+n*2,a=this.#i.height+n*2,r=ht(t,e,s,a);this.#o=r;const c=s*r,l=a*r;switch(this.#n=n*r,this.#e.style.width=c+"px",this.#e.style.height=l+"px",this.#e.domWidth=c,this.#e.domHeight=l,o){case"original":this.#e.width=s,this.#e.height=a,this.#t.scale(1/r,1/r);break;case"high":{const d=window.devicePixelRatio;this.#e.width=c*d,this.#e.height=l*d,this.#t.scale(d,d);break}case"half":{const d=this.#i.height/l/2;this.#e.width=c*d,this.#e.height=l*d,this.#t.scale(d,d);break}}return this.#r(r,n)}#r(t,e){if(!this.#c)throw new Error("Failed to calculate wanted image info: WantedImageInfo object is null");e*=t;const{imageUrl:n,bellyImageUrl:o,photoPosition:s,namePosition:a,bountyInfo:r,boundaryOffset:c}=this.#c,l=d=>{const{x:p,y:m,width:y,height:v}=d;return{x:p*t+e,y:m*t+e,width:y*t,height:v*t}},h={...l(r),bellyMarginRight:r.bellyMarginRight*t,fontSize:r.fontSize*t};return{imageUrl:n,bellyImageUrl:o,photoPosition:l(s),namePosition:l(a),bountyInfo:h,boundaryOffset:{left:c.left*t+e,right:c.right*t+e,top:c.top*t+e,bottom:c.bottom*t+e}}}render(){this.#i&&(this.#t.save(),this.#t.shadowColor="rgba(0, 0, 0, 1)",this.#t.shadowBlur=this.#n*(this.#e.width/this.#e.domWidth),this.#t.drawImage(this.#i,this.#n,this.#n,this.#e.domWidth-this.#n*2,this.#e.domHeight-this.#n*2),this.#t.restore())}}const Xn="wanted-poster",Yn=["name","bounty","name-spacing","bounty-spacing","bounty-font-family","bounty-font-scale","bounty-font-weight","bounty-vertical-offset","photo-url","filter","poster-shadow","photo-shadow"];class Vn extends HTMLElement{#t;#e;#n;#o;#i;#c;#r;#a;#h;#p;#u;constructor(){super(),this.#h="init";const t=this.attachShadow({mode:"open"}),e=document.createElement("canvas");e.domWidth=0,e.domHeight=0;const n=document.createElement("div");n.className="container";const o=document.createElement("style");o.textContent=Dn,t.append(o,n);const s=e.getContext("2d");this.#t=n,this.#e=e,this.#n=s,this.#a=new Ot(s,J),this.#o=new Ft(s),this.#c=new At(s),this.#r=new Ct(s),this.#i=new Qn(s,this.#o),this.#p=new ResizeObserver(()=>{clearTimeout(this.#u),this.#u=window.setTimeout(()=>this.#s(),200)}),this.#p.observe(n)}static get observedAttributes(){return Yn}async connectedCallback(){console.log("[connected]"),await new Promise(n=>{setTimeout(()=>n(""))}),this.#h="loading";const t=this.#d("poster-shadow"),e=this.#t.getBoundingClientRect();try{await this.#a.loadImage();const n=this.#a.setSize({width:e.width,height:e.height,shadowSize:t,quality:"half"});this.#c.setPosition(n.namePosition),this.#r.setBountyInfo(n.bountyInfo,this.#a.imageScale),await this.#r.loadBellyImage(J.bellyImageUrl),await this.#o.init(n.photoPosition,n.boundaryOffset),await this.#o.loadImage(this.getAttribute("photo-url"))}catch(n){this.#h="error",console.error("Failed to init wanted poster.",n);return}this.#h="success",this.#g(),this.#t.appendChild(this.#e),this.dispatchEvent(new CustomEvent("WantedPosterLoaded",{bubbles:!0}))}disconnectedCallback(){console.log("[disconnected]"),this.#p.disconnect()}adoptedCallback(){console.log("[adopted]")}async attributeChangedCallback(t,e,n){switch(t){case"name":this.#c.text=n;break;case"bounty":this.#r.text=n;break;case"name-spacing":this.#c.spacing=parseFloat(n)||0;break;case"bounty-spacing":this.#r.spacing=parseFloat(n)||0;break;case"bounty-font-family":this.#r.fontFamily=n;break;case"bounty-font-scale":this.#r.fontScale=parseFloat(n)||1;break;case"bounty-font-weight":this.#r.fontWeight=parseFloat(n)||600;break;case"bounty-vertical-offset":this.#r.verticalOffset=parseFloat(n)||0;break;case"photo-url":{await this.#o.loadImage(n),this.#i.highlight=!n.endsWith("#nohighlight");break}case"filter":{this.#o.filter=n;break}case"poster-shadow":{this.#s();break}case"photo-shadow":this.#o.shadow=parseFloat(n)||0}}#d(t,e=0){const n=this.getAttribute(t)||"";return parseFloat(n)||e}async export(){const t=document.createElement("canvas");t.domWidth=0,t.domHeight=0,t.style.display="none";const e=t.getContext("2d"),n=this.#d("poster-shadow"),o=new Ot(e,J),s=new Ft(e),a=new At(e),r=new Ct(e),c=await o.loadImage(),l=c.width+n*2,h=c.height+n*2,d=o.setSize({width:l,height:h,shadowSize:n,quality:"original"});await r.loadBellyImage(d.bellyImageUrl),a.setPosition(d.namePosition),r.setBountyInfo(d.bountyInfo,1),a.text=this.getAttribute("name")??"",r.text=this.getAttribute("bounty")??"",a.spacing=this.#d("name-spacing"),r.spacing=this.#d("bounty-spacing"),r.fontFamily=this.getAttribute("bounty-font-family")??"",r.fontScale=this.#d("bounty-font-scale",1),r.fontWeight=this.#d("bounty-font-weight"),r.verticalOffset=this.#d("bounty-vertical-offset"),await s.init(d.photoPosition,d.boundaryOffset),await s.loadImage(this.getAttribute("photo-url")),s.shadow=this.#d("photo-shadow");const{x:p,y:m,width:y,height:v,filter:b}=this.#o;s.x=p/this.#a.imageScale,s.y=m/this.#a.imageScale,s.width=y/this.#a.imageScale,s.height=v/this.#a.imageScale,s.filter=b,s.updateRenderPosition(),s.render(),o.render(),r.render(),a.render();let E="";try{const k=await new Promise((x,w)=>{t.toBlob(T=>T?x(T):w("Failed to create blob object."),"image/png",1)});E=URL.createObjectURL(k),this.#m(E,"wanted-poster.png")}finally{E&&URL.revokeObjectURL(E)}}#m(t,e){const n=document.createElement("a");n.setAttribute("href",t),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),n.remove()}#s(){if(this.#h!=="success")return;const t=this.#d("poster-shadow"),e=this.#t.getBoundingClientRect(),n=this.#e.getBoundingClientRect(),o=ht(e.width,e.height,n.width,n.height),s=this.#a.setSize({width:e.width,height:e.height,shadowSize:t,quality:"half"});this.#c.setPosition(s.namePosition),this.#r.setBountyInfo(s.bountyInfo,this.#a.imageScale),this.#o.setBoundary(s.photoPosition,s.boundaryOffset),this.#i.scale(o),this.#i.borderScale=this.#a.imageScale}#g(){this.#n.clearRect(0,0,this.#e.domWidth,this.#e.domHeight),this.#o.render(),this.#a.render(),this.#r.render(),this.#c.render(),this.#i.render(),requestAnimationFrame(this.#g.bind(this))}}customElements.define(Xn,Vn);const G=new Map,M={photoUrl:"",name:"",bounty:"",nameSpacing:0,bountySpacing:1,bountyFontFamily:"Vertiky",bountyFontScale:1,bountyFontWeight:600,bountyVerticalOffset:-4,filter:"",posterShadow:0,photoShadow:0,blur:0,brightness:100,contrast:100,grayscale:0,hueRotate:0,saturate:100,sepia:0};function Zn(i){return i in M}function rt({blur:i,brightness:t,contrast:e,grayscale:n,hueRotate:o,saturate:s,sepia:a}){return`blur(${i}px) brightness(${t}%) contrast(${e}%) grayscale(${n}%) hue-rotate(${o}deg) saturate(${s}%) sepia(${a}%)`}const u=new Proxy({...M,filter:rt(M)},{set(i,t,e,n){if(!Zn(t))return!0;switch(t){case"blur":case"brightness":case"contrast":case"grayscale":case"hueRotate":case"saturate":case"sepia":{const o=rt({...i,[t]:e});if(o===i.filter)break;i.filter=o,setTimeout(()=>{(G.get("filter")??[]).forEach(a=>a("filter",o,i))})}}return setTimeout(()=>{(G.get(t)??[]).forEach(s=>s(t,e,i))}),Reflect.set(i,t,e,n)}});function f(i,t){let e=G.get(i);e||(e=[],G.set(i,e)),e.push(t)}function K(i={}){Object.assign(u,{...u,filter:rt(M),...i})}function Jn(i={}){Object.assign(u,{...M,...i})}const Kn=":host{--slider-thumb-size: 2rem;display:block;position:fixed;top:0;left:0;transform:translate(-105%);transition:transform .2s;box-sizing:border-box;box-shadow:.1rem 0 .3rem #0000007f;border:1px solid #3b230e;background:linear-gradient(120deg,#f5c65f,#f5da9e,#f5c660);padding:.125rem;width:18.75rem;max-width:80%;height:100%}:host(.open){transform:translate(0)}.container{display:flex;flex-direction:column;box-sizing:border-box;box-shadow:inset 0 0 .2rem .2rem #0000007f;border:.0625rem solid rgb(180 150 81);background:url("+new URL("../images/wood-bg.png",import.meta.url).href+") repeat-y center top;background-size:100% auto;width:100%;height:100%}.field-container{display:flex;flex:1 0;flex-direction:column;gap:2.5rem;padding:1rem;overflow:hidden auto}.action-container{display:flex;justify-content:space-around;align-items:center;padding:0 1rem;height:4rem}.wood-button{display:flex;justify-content:center;align-items:center;filter:var(--element-filter);transition:.05s;cursor:pointer;outline:none;border:0;background-image:url("+new URL("../images/wood-button.png",import.meta.url).href+");background-position:center;background-size:100% 100%;background-repeat:no-repeat;background-color:transparent;width:6rem;height:2rem;color:#fff;font-size:1rem;font-family:serif;text-shadow:var(--text-shadow)}.wood-button:hover{filter:var(--element-hover-filter)}.close-button{filter:var(--element-filter);transition:.1s;cursor:pointer;outline:none;border:0;background-image:url("+new URL("../images/close-button.png",import.meta.url).href+");background-position:center;background-size:100% 100%;background-repeat:no-repeat;background-color:transparent;width:2rem;height:2rem}.close-button:hover{filter:var(--element-hover-filter)}.wood-button:active,.close-button:active{transform:translateY(1px);filter:var(--element-active-filter)}.text-input{filter:var(--element-filter);box-sizing:border-box;outline:none;border:0;background-image:url("+new URL("../images/input-frame.png",import.meta.url).href+");background-position:center;background-size:100% 100%;background-repeat:no-repeat;background-color:transparent;padding:0 .8rem 0 .75rem;width:100%;color:var(--dark-text-color);font-size:1rem;line-height:2rem;font-family:serif;text-align:center}.text-input::-moz-placeholder{color:#0000004d;font-size:1rem;text-shadow:none}.text-input::placeholder{color:#0000004d;font-size:1rem;text-shadow:none}.header{display:flex;position:relative;flex-shrink:0;justify-content:center;align-items:center;box-sizing:border-box;margin:0 auto 1.5em;background-image:url("+new URL("../images/scroll-paper.png",import.meta.url).href+");background-position:center;background-size:100% 100%;background-repeat:no-repeat;background-color:transparent;padding-bottom:.1rem;padding-left:.5rem;width:14rem;height:2.75rem;color:var(--dark-text-color);font-size:1rem}.field-group{display:grid;grid-template-columns:auto 1fr;align-items:center;gap:.5rem 1rem;color:#fff;text-align:right}.field-group label{font-size:.8rem;text-shadow:0 0 .25rem black,0 0 .5rem rgb(57 42 34)}::-moz-selection{filter:brightness(120%);background:#584034cc;color:#fff}::selection{filter:brightness(120%);background:#584034cc;color:#fff}::-webkit-scrollbar{width:.2rem}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{border-radius:.1rem;background:#f5d58d}::-webkit-scrollbar-corner{background:transparent}",ti=`<div class="container">
  <div class="field-container">
    <div>
      <h4 class="header">Name</h4>
      <div class="field-group">
        <label>Text</label>
        <input id="nameInput" class="text-input" placeholder="Name" />

        <label>Spacing</label>
        <range-slider id="nameSpacingSlider" min="0" max="3"></range-slider>
      </div>
    </div>

    <div>
      <h4 class="header">Bounty</h4>

      <div class="field-group">
        <label>Text</label>
        <input id="bountyInput" class="text-input" placeholder="Bounty" />

        <label>Spacing</label>
        <range-slider id="bountySpacingSlider" min="0" max="3"></range-slider>

        <label>Font</label>
        <font-select id="bountyFontFamilySelect"></font-select>

        <label>Size</label>
        <range-slider
          id="bountyFontScaleSlider"
          min="0.5"
          max="2"
          step="0.01"
        ></range-slider>

        <label>Weight</label>
        <range-slider
          id="bountyFontWeightSlider"
          min="100"
          max="900"
          step="100"
        ></range-slider>

        <label>Position</label>
        <range-slider
          id="bountyOffsetSlider"
          min="-20"
          max="20"
          step="0.5"
        ></range-slider>
      </div>
    </div>

    <div>
      <h4 class="header">Photo Filter</h4>

      <div class="field-group">
        <label>Shadow</label>
        <range-slider id="photoShadowSlider" min="0" max="20"></range-slider>

        <label>Blur</label>
        <range-slider id="blurSlider" min="0" max="10"></range-slider>

        <label>Brightness</label>
        <range-slider id="brightnessSlider" min="0" max="200"></range-slider>

        <label>Contrast</label>
        <range-slider id="contrastSlider" min="0" max="200"></range-slider>

        <label>Grayscale</label>
        <range-slider id="grayscaleSlider" min="0" max="100"></range-slider>

        <label>Hue Rotate</label>
        <range-slider id="hueRotateSlider" min="0" max="360"></range-slider>

        <label>Saturate</label>
        <range-slider id="saturateSlider" min="0" max="200"></range-slider>

        <label>Sepia</label>
        <range-slider id="sepiaSlider" min="0" max="100"></range-slider>
      </div>
    </div>

    <div>
      <h4 class="header">Poster Shadow</h4>
      <range-slider id="posterShadowSlider" min="0" max="20"></range-slider>
    </div>
  </div>
  <div class="action-container">
    <button
      id="closeButton"
      class="close-button"
      aria-label="Close edit panel button"
      title="Close"
    ></button>
    <button
      id="resetButton"
      class="wood-button"
      aria-label="Reset button"
      title="Reset to default settings."
    >
      RESET
    </button>
  </div>
</div>
`,ei="edit-panel",ae=document.createElement("template");ae.innerHTML=ti;class ni extends HTMLElement{#t;#e;#n;#o;#i;#c;#r;#a;#h;#p;#u;#d;#m;#s;#g;#f;#y;#v;#w;#b;#l;constructor(){super();const t=this.attachShadow({mode:"open"}),e=document.createElement("style");e.textContent=Kn,t.append(e,ae.content.cloneNode(!0)),this.#t=t.querySelector("#nameInput"),this.#e=t.querySelector("#bountyInput"),this.#n=t.querySelector("#nameSpacingSlider"),this.#o=t.querySelector("#bountyFontFamilySelect"),this.#i=t.querySelector("#bountySpacingSlider"),this.#c=t.querySelector("#bountyFontScaleSlider"),this.#r=t.querySelector("#bountyFontWeightSlider"),this.#a=t.querySelector("#bountyOffsetSlider"),this.#h=t.querySelector("#posterShadowSlider"),this.#p=t.querySelector("#photoShadowSlider"),this.#u=t.querySelector("#blurSlider"),this.#d=t.querySelector("#brightnessSlider"),this.#m=t.querySelector("#contrastSlider"),this.#s=t.querySelector("#grayscaleSlider"),this.#g=t.querySelector("#hueRotateSlider"),this.#f=t.querySelector("#saturateSlider"),this.#y=t.querySelector("#sepiaSlider"),this.#v=t.querySelector("#closeButton"),this.#w=t.querySelector("#resetButton"),this.#l=(n,o)=>{switch(o=o.toString(),n){case"name":this.#t.value=o;break;case"bounty":this.#e.value=o;break;case"nameSpacing":this.#n.value=o;break;case"bountySpacing":this.#i.value=o;break;case"bountyFontFamily":this.#o.value=o;break;case"bountyFontScale":this.#c.value=o;break;case"bountyFontWeight":this.#r.value=o;break;case"bountyVerticalOffset":this.#a.value=o;break;case"posterShadow":this.#h.value=o;break;case"photoShadow":this.#p.value=o;break;case"blur":this.#u.value=o;break;case"brightness":this.#d.value=o;break;case"contrast":this.#m.value=o;break;case"grayscale":this.#s.value=o;break;case"hueRotate":this.#g.value=o;break;case"saturate":this.#f.value=o;break;case"sepia":this.#y.value=o;break}},this.#b=n=>{n.composedPath().includes(this)||this.classList.contains("open")&&this.toggle()}}toggle(){this.classList.toggle("open")}connectedCallback(){window.addEventListener("pointerdown",this.#b),f("name",this.#l),f("bounty",this.#l),f("nameSpacing",this.#l),f("bountySpacing",this.#l),f("bountyFontFamily",this.#l),f("bountyFontScale",this.#l),f("bountyFontWeight",this.#l),f("bountyVerticalOffset",this.#l),f("posterShadow",this.#l),f("photoShadow",this.#l),f("blur",this.#l),f("saturate",this.#l),f("contrast",this.#l),f("grayscale",this.#l),f("hueRotate",this.#l),f("hueRotate",this.#l),f("sepia",this.#l),this.#t.value=u.name,this.#e.value=u.bounty.toString(),this.#n.value=u.nameSpacing.toString(),this.#i.value=u.bountySpacing.toString(),this.#o.value=u.bountyFontFamily.toString(),this.#c.value=u.bountyFontScale.toString(),this.#r.value=u.bountyFontWeight.toString(),this.#a.value=u.bountyVerticalOffset.toString(),this.#h.value=u.posterShadow.toString(),this.#p.value=u.photoShadow.toString(),this.#u.value=u.blur.toString(),this.#d.value=u.brightness.toString(),this.#m.value=u.contrast.toString(),this.#s.value=u.grayscale.toString(),this.#g.value=u.hueRotate.toString(),this.#f.value=u.saturate.toString(),this.#y.value=u.sepia.toString(),this.#t.addEventListener("input",()=>u.name=this.#t.value),this.#n.addEventListener("input",()=>u.nameSpacing=parseFloat(this.#n.value)),this.#e.addEventListener("input",()=>u.bounty=this.#e.value),this.#o.addEventListener("input",()=>{u.bountyFontFamily=this.#o.value}),this.#i.addEventListener("input",()=>{u.bountySpacing=parseFloat(this.#i.value)}),this.#c.addEventListener("input",()=>{u.bountyFontScale=parseFloat(this.#c.value)}),this.#r.addEventListener("input",()=>{u.bountyFontWeight=parseFloat(this.#r.value)}),this.#a.addEventListener("input",()=>{u.bountyVerticalOffset=parseFloat(this.#a.value)}),this.#p.addEventListener("input",()=>u.photoShadow=parseFloat(this.#p.value)),this.#u.addEventListener("input",()=>u.blur=parseFloat(this.#u.value)),this.#d.addEventListener("input",()=>u.brightness=parseFloat(this.#d.value)),this.#m.addEventListener("input",()=>u.contrast=parseFloat(this.#m.value)),this.#s.addEventListener("input",()=>u.grayscale=parseFloat(this.#s.value)),this.#g.addEventListener("input",()=>u.hueRotate=parseFloat(this.#g.value)),this.#f.addEventListener("input",()=>u.saturate=parseFloat(this.#f.value)),this.#y.addEventListener("input",()=>u.sepia=parseFloat(this.#y.value)),this.#h.addEventListener("input",()=>u.posterShadow=parseFloat(this.#h.value)),this.#v.addEventListener("click",()=>this.toggle()),this.#w.addEventListener("click",()=>Jn({photoUrl:u.photoUrl}))}}customElements.define(ei,ni);const ii=":host{display:block;position:fixed;top:0;right:0;transform:translate(105%);transition:transform .2s;box-sizing:border-box;box-shadow:.1rem 0 .3rem #0000007f;border:1px solid #3b230e;background:linear-gradient(120deg,#f5c65f,#f5da9e,#f5c660);padding:.125rem;width:28rem;max-width:80%;height:100%;-webkit-user-select:none;-moz-user-select:none;user-select:none}:host(.open){transform:translate(0)}.container{box-sizing:border-box;container:panel / inline-size;box-shadow:inset 0 0 .2rem .2rem #0000007f;border:.0625rem solid rgb(180 150 81);background:url("+new URL("../images/wood-bg.png",import.meta.url).href+") repeat-y center top;background-size:100% auto;width:100%;height:100%}.container>*{height:100%}.loading,.error{display:flex;justify-content:center;align-items:center;padding:1rem;color:#fff}.loading{font-size:6rem}.content{display:grid;grid-template-rows:auto 1fr auto}.header{display:grid;grid-template-columns:1fr auto auto;align-items:center;gap:1rem;padding:.5rem 1rem}.image-grid{display:grid;grid-template-rows:1fr 1fr 1fr 1fr 1fr;grid-template-columns:1fr 1fr;gap:1rem;padding:1rem;overflow-y:auto}.image-grid>img{filter:drop-shadow(0 0 .15rem rgb(0 0 0 / 80%));cursor:pointer;background-color:#fff;max-width:100%;max-height:100%;-o-object-fit:contain;object-fit:contain}.pagination{display:flex;align-items:center;border:1px solid #3b230e;background:linear-gradient(120deg,#f5c65f,#f5da9e,#f5c660);padding:.5rem}.page-number-wrapper{display:flex;flex-grow:1;justify-content:space-evenly}.page-button,.navigate-button{display:flex;justify-content:center;align-items:center;transition:.2s;border:0;border-radius:.125em;background-color:transparent;padding:0 .25em;min-width:1.25em;min-height:1.25em;color:#3b230e;font-size:1em}.navigate-button{position:relative;font-size:1.6em}.navigate-button[disabled]{color:#3b230e7f}.navigate-button iconify-icon{position:absolute;pointer-events:none}.page-button:not([disabled]),.navigate-button:not([disabled]){cursor:pointer}.page-button:not([disabled]):hover,.navigate-button:not([disabled]):hover{background-color:#3b230e33}.page-button--active{background-color:#3b230e;color:#fff}@media(min-width:430px){.pagination{gap:.5rem;font-size:1.25rem}}.search-input{filter:var(--element-filter);box-sizing:border-box;margin-right:auto;outline:none;border:0;background-image:url("+new URL("../images/input-frame.png",import.meta.url).href+");background-position:center;background-size:100% 100%;background-repeat:no-repeat;background-color:transparent;padding:0 1rem;width:100%;max-width:14rem;height:2.75rem;color:var(--dark-text-color);font-size:1.4rem;line-height:2rem;font-family:serif;text-align:center}.search-input::-moz-placeholder{color:#0000004d;text-shadow:none}.search-input::placeholder{color:#0000004d;text-shadow:none}#order-button::part(icon){transition:.2s transform}#order-button[descending]::part(icon){transform:scaleX(-1) rotate(180deg)}:host([loading]) .content{display:none}:host([loading]) .error{display:none}:host([error]) .content{display:none}:host([error]) .loading{display:none}::-moz-selection{filter:brightness(120%);background:#584034cc;color:#fff}::selection{filter:brightness(120%);background:#584034cc;color:#fff}::-webkit-scrollbar{width:.2rem}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{border-radius:.1rem;background:#f5d58d}::-webkit-scrollbar-corner{background:transparent}",oi=`<div class="container">
  <div class="content">
    <div class="header">
      <input
        id="searchInput"
        type="text"
        class="search-input"
        placeholder="Name or ID"
      />
      <icon-button
        id="order-button"
        icon="tdesign:order-ascending"
        title="Change order"
        aria-label="Change order"
      ></icon-button>
      <icon-button
        id="close-button"
        icon="ep:close-bold"
        title="Close"
        aria-label="Close"
      ></icon-button>
    </div>
    <div id="imageGrid" class="image-grid"></div>
    <div class="pagination">
      <button
        id="preButton"
        class="navigate-button"
        title="Previous page"
        aria-label="Previous page"
      >
        <iconify-icon icon="ic:round-navigate-before"></iconify-icon>
      </button>
      <div id="pageNumberWrapper" class="page-number-wrapper"></div>
      <button
        id="nextButton"
        class="navigate-button"
        title="Next page"
        aria-label="Next page"
      >
        <iconify-icon icon="ic:round-navigate-next"></iconify-icon>
      </button>
    </div>
  </div>
  <div class="loading">
    <iconify-icon icon="eos-icons:loading"></iconify-icon>
  </div>
  <div id="error" class="error">Error</div>
</div>
`,si="optc-gallery-panel",ce=document.createElement("template");ce.innerHTML=oi;class ri extends HTMLElement{#t=0;#e=null;#n;#o;#i;#c;#r;#a;#h;#p;#u;#d="ascending";#m=10;#s=1;#g=0;constructor(){super();const t=this.attachShadow({mode:"open"}),e=document.createElement("style");e.textContent=ii,t.append(e,ce.content.cloneNode(!0)),this.#n=t.querySelector("#searchInput"),this.#o=t.querySelector("#order-button"),this.#i=t.querySelector("#close-button"),this.#c=t.querySelector("#imageGrid"),this.#r=t.querySelector("#pageNumberWrapper"),this.#a=t.querySelector("#preButton"),this.#h=t.querySelector("#nextButton"),this.#p=t.querySelector("#error"),this.#u=n=>{n.composedPath().includes(this)||this.classList.contains("open")&&this.toggle()}}async init(){this.setAttribute("loading","");try{const[t,e]=await Promise.all([this.#f(),this.#y()]);for(let n=e.length-1;n>0;n--){const o=n+1;if(o in t)continue;const s=e[n][0];t[o]=[s]}this.#e=t,this.#b()}catch(t){this.setAttribute("error","");let e="Faild to get character info.";t instanceof Error&&(e+=`
`+t.message),this.#p.innerText=e}finally{this.removeAttribute("loading")}}async#f(){let e=await(await fetch("https://raw.githubusercontent.com/optc-db/optc-db.github.io/master/common/data/families.js")).text();e=e.replace("(function () {","").replace("window.families =","const families = ").replace("const calcGhostStartIDStart = 5000;","").replace(/const ghostFamilies(.|\n)*\}\);/,"").replace("})();","export default families");const n=new Blob([e],{type:"text/javascript"}),o=URL.createObjectURL(n),{default:s}=await import(o);return s}async#y(){let e=await(await fetch("https://raw.githubusercontent.com/optc-db/optc-db.github.io/master/common/data/units.js")).text();e=e.replace("window.units =","const units = ").replace("for(var i = 0; window.units.length","for(var i = 0; Infinity").replace("window.units.push","units.push").replace("window.units = window.units.concat(globalExUnits);","").replace("window.units = window.units.concat(ghostsUnits);","export default units").replaceAll("var ","let ");const n=new Blob([e],{type:"text/javascript"}),o=URL.createObjectURL(n),{default:s}=await import(o);return s}get ids(){if(!this.#e)return[];const t=this.#n.value.toLowerCase().trim();if(!t)return Array.from(Object.keys(this.#e));const e=[];for(const n in this.#e){if(n.includes(t)){e.push(n);continue}this.#e[n].some(a=>a.toLocaleLowerCase().includes(t))&&e.push(n)}return e}#v(){clearTimeout(this.#t),this.#t=setTimeout(()=>{this.#s=1,this.#b()},500)}#w(){if(this.#r.innerHTML="",this.#g===0){this.#a.disabled=!0,this.#h.disabled=!0;return}let t=1;const e=new Set([1,this.#g,this.#s]),n=Math.min(this.#g,5);for(;e.size<n;){const s=Math.max(this.#s-t,1),a=Math.min(this.#s+t,this.#g);e.add(s),e.add(a),t++}const o=Array.from(e.values()).sort((s,a)=>s-a);o.forEach((s,a)=>{const r=document.createElement("button");r.innerText=s.toString(),r.classList.add("page-button"),r.addEventListener("click",()=>{this.#s=s,this.#b()}),this.#s===s&&(r.classList.add("page-button--active"),r.toggleAttribute("disabled")),this.#r.appendChild(r);const c=a+1;if(c<o.length&&o[c]-s>1){const l=document.createElement("button");l.classList.add("page-button"),l.toggleAttribute("disabled"),l.innerText="...",this.#r.appendChild(l)}}),this.#a.toggleAttribute("disabled",this.#s===1),this.#h.toggleAttribute("disabled",this.#s===this.#g)}#b(){this.#c.innerHTML="";const t=this.ids;if(this.#g=Math.ceil(t.length/this.#m),this.#w(),this.#g===0)return;const e=(this.#s-1)*this.#m;(this.#d==="ascending"?t.slice(e,e+this.#m):t.reverse().slice(e,e+this.#m)).forEach(o=>{const s=parseInt(o);if(isNaN(s))return;const a=Math.floor(s/1e3),r=(Math.floor(s%1e3/100)*100).toString().padStart(3,"0"),c=s.toString().padStart(4,"0")+".png",l=`https://optc-db.github.io/api/images/full/transparent/${a}/${r}/${c}`,h=this.#e?this.#e[o].join(", ").toUpperCase():"",d=new Image;d.src=l,d.loading="lazy",d.dataset.id=o,d.dataset.name=h,this.#c.appendChild(d)})}toggle(){!this.#e&&!this.classList.contains("open")&&this.init(),this.classList.toggle("open")}connectedCallback(){window.addEventListener("pointerdown",this.#u),this.#n.addEventListener("input",()=>this.#v()),this.#o.addEventListener("click",()=>{this.#d=this.#d==="ascending"?"descending":"ascending",this.#o.toggleAttribute("descending"),this.#b()}),this.#i.addEventListener("click",()=>this.toggle()),this.#c.addEventListener("click",t=>{const e=t.target;e instanceof Image&&(u.photoUrl=e.src,u.name=e.dataset.name??"",this.toggle())}),this.#a.addEventListener("click",()=>{this.#s!==1&&(this.#s--,this.#b())}),this.#h.addEventListener("click",()=>{this.#s!==this.#g&&(this.#s++,this.#b())})}disconnectedCallback(){window.removeEventListener("pointerdown",this.#u)}}customElements.define(si,ri);const N={posterShadow:5,photoShadow:4,blur:0,brightness:100,contrast:100,hueRotate:0,grayscale:12,saturate:80,sepia:15,name:"PUTLER",bounty:"War Criminal",nameSpacing:0,bountySpacing:1,bountyFontFamily:"Scheherazade New",bountyFontScale:1.35,bountyVerticalOffset:0,photoUrls:["./images/war-criminal/photo-01.png","./images/war-criminal/photo-02.png","./images/war-criminal/photo-03.png"]};function ai(i){window.launchQueue?.setConsumer(t=>{t.files?.length&&i(t.files)})}function ci(i){return i.kind==="file"}const Mt={setConsumer:ai,isFileHandle:ci},li=":host{display:block;position:relative;transition:background-color .2s;box-sizing:border-box;background-image:url("+new URL("../images/cement-wall.jpg",import.meta.url).href+");background-position:center;background-size:cover;background-blend-mode:multiply;padding:1rem;width:100%;height:100%}:host(.warcriminal){background-image:url("+new URL("../images/cement-wall.jpg",import.meta.url).href+"),url("+new URL("../images/blood-stains-0.png",import.meta.url).href+")}:host(.dragin){background-color:silver}#upload-input{display:none}.blood-overlay{display:none;position:absolute;top:0;left:0;opacity:.8;mix-blend-mode:multiply;animation-duration:4s;animation-name:fade-in;background-image:url("+new URL("../images/blood-stains-1.png",import.meta.url).href+");background-position:center;background-size:cover;width:100%;height:100%}.blood-overlay--visible{display:block}.loading-overlay{display:flex;position:absolute;top:0;left:0;justify-content:center;align-items:center;background-image:radial-gradient(#e1e4e7,#a5aab0);width:100%;height:100%}.loading-overlay__luffy{filter:drop-shadow(0 3px 3px rgb(0 0 0 / 50%));max-width:50vw;max-height:40vh}.tips-button{position:absolute;top:.8rem;left:.8rem;cursor:pointer;outline:none;border:0;background-color:transparent;padding:0}.tips-button>svg{filter:drop-shadow(0 0 2px rgb(0 0 0 / 50%));transition:.2s}.tips-button>svg:hover{filter:drop-shadow(0 0 3px #c08000) drop-shadow(0 0 5px #fffca3)}.tips-button--hidden{display:none}.optc-button{position:fixed;top:.5rem;right:5rem;filter:drop-shadow(0 0 .125rem rgb(0 0 0));transition:filter .2s;cursor:pointer;outline:none;border:0;background-image:url("+new URL("../images/tavern-button.png",import.meta.url).href+");background-position:center;background-size:contain;background-repeat:no-repeat;background-color:transparent;padding:0;width:2.4rem;height:2.4rem}.optc-button--hidden{display:none}.optc-button:hover{filter:drop-shadow(0 0 .18rem rgb(0 0 0))}.button-container{display:flex;position:absolute;bottom:0;left:0;gap:.5rem;box-sizing:border-box;padding:0 1rem 1rem}.button-container--hidden{display:none}.criminal{position:fixed;right:1rem;bottom:1.2rem;visibility:hidden;opacity:0;transition:visiblity 2s,opacity 2s;cursor:pointer;margin-left:auto;outline:none;border:0;background-color:transparent;padding:0;width:4rem;max-width:15vw;height:4rem;max-height:15vw}.criminal--visible{visibility:visible;opacity:1}.criminal.criminal--visible:after{top:55%;opacity:1}.criminal:before{position:absolute;top:0;left:0;filter:contrast(85%) brightness(0%) drop-shadow(1px 1px .5rem crimson) drop-shadow(-1px -1px .5rem crimson);transition:filter .5s;background-image:url("+new URL("../images/war-criminal/criminal-avatar.png",import.meta.url).href+');background-position:center;background-size:contain;background-repeat:no-repeat;width:100%;height:100%;content:" "}.criminal--stamp:before{filter:contrast(85%) brightness(110%) drop-shadow(1px 1px .1rem rgb(0 0 0 / 50%)) drop-shadow(-1px -1px .1rem rgb(0 0 0 / 50%));background-image:url('+new URL("../images/war-criminal/criminal-stamp.png",import.meta.url).href+"),url("+new URL("../images/war-criminal/criminal-avatar.png",import.meta.url).href+')}.criminal:after{position:absolute;top:120%;left:53%;transform:translate(-50%,-50%);opacity:0;filter:brightness(100%)!important;transition:1s ease-out;content:"?";color:#fff;font-size:min(7vw,2rem)}.criminal--stamp:after{content:""}@keyframes fade-in{0%{opacity:0}to{opacity:.8}}',hi=`<input id="upload-input" type="file" accept="image/*" />
<slot name="poster"></slot>
<div class="blood-overlay"></div>

<div class="button-container">
  <wanted-button
    id="editButton"
    aria-label="Edit panel button"
    title="Open the edit panel."
  >
    <iconify-icon slot="icon" icon="fluent-mdl2:edit-photo"></iconify-icon>
    EDIT
  </wanted-button>

  <wanted-button
    id="importButton"
    aria-label="Import button"
    title="Import local image to edit."
  >
    <iconify-icon slot="icon" icon="uil:image-upload"></iconify-icon>
    IMPORT
  </wanted-button>

  <wanted-button
    id="exportButton"
    aria-label="Export button"
    title="Export as image file."
  >
    <iconify-icon slot="icon" icon="uil:image-download"></iconify-icon>
    EXPORT
  </wanted-button>
</div>

<button
  id="criminalButton"
  class="criminal"
  aria-label="Criminal mode button"
  title="War criminal"
></button>

<button
  id="tipsButton"
  class="tips-button"
  aria-label="Tips button"
  title="Tips"
>
  <svg width="32" height="32" viewBox="0 0 25 22">
    <defs>
      <radialGradient id="logo-gradient" cx="34%" cy="32%" fr="5%">
        <stop offset="0%" stop-color="#FFFDA8"></stop>
        <stop offset="70%" stop-color="#FFAB00"></stop>
      </radialGradient>
    </defs>
    <path
      fill="url('#logo-gradient')"
      stroke="#4E4A49"
      d="m22 10l-.625-1.375L20 8l1.375-.625L22 6l.625 1.375L24 8l-1.375.625Zm-3-4l-.95-2.05L16 3l2.05-.95L19 0l.95 2.05L22 3l-2.05.95ZM9 22q-.825 0-1.412-.587Q7 20.825 7 20h4q0 .825-.587 1.413Q9.825 22 9 22Zm-4-3v-2h8v2Zm.25-3q-1.725-1.025-2.737-2.75Q1.5 11.525 1.5 9.5q0-3.125 2.188-5.312Q5.875 2 9 2q3.125 0 5.312 2.188Q16.5 6.375 16.5 9.5q0 2.025-1.012 3.75q-1.013 1.725-2.738 2.75Z"
    />
  </svg>
</button>

<button
  id="optcButton"
  class="optc-button"
  aria-label="ONE PIECE Treasure Cruise gallery"
  title="ONE PIECE Treasure Cruise gallery"
></button>

<tips-dialog></tips-dialog>

<slot></slot>

<edit-panel></edit-panel>
<optc-gallery-panel></optc-gallery-panel>

<div class="loading-overlay">
  <luffy-logo class="loading-overlay__luffy"></luffy-logo>
</div>
`,di="app-container",F="#warcriminal",le=document.createElement("template");le.innerHTML=hi;class ui extends HTMLElement{#t;#e;#n;#o;#i;#c;#r;#a;#h;#p;#u;#d=0;#m=0;#s;#g;#f;constructor(){super();const t=this.attachShadow({mode:"open"});this.#s=t;const e=document.createElement("style");e.textContent=li,t.append(e,le.content.cloneNode(!0)),t.addEventListener("WantedPosterLoaded",()=>{this.#y()});const n=this.#s.querySelector("slot[name=poster]");this.#o=n?.assignedNodes()[0],this.#t=this.#s.querySelector("edit-panel"),this.#e=this.#s.querySelector("optc-gallery-panel"),this.#n=this.#s.querySelector("tips-dialog"),this.#i=this.#s.querySelector("#upload-input"),this.#c=this.#s.querySelector("#editButton"),this.#r=this.#s.querySelector("#importButton"),this.#a=this.#s.querySelector("#exportButton"),this.#h=this.#s.querySelector("#criminalButton"),this.#p=this.#s.querySelector("#tipsButton"),this.#u=this.#s.querySelector("#optcButton"),this.#g=this.#v.bind(this),this.#f=(o,s)=>{switch(o){case"photoUrl":this.#l({"photo-url":s.toString()});break;case"nameSpacing":this.#l({"name-spacing":s.toString()});break;case"bountySpacing":this.#l({"bounty-spacing":s.toString()});break;case"bountyFontFamily":this.#l({"bounty-font-family":s.toString()});break;case"bountyFontScale":this.#l({"bounty-font-scale":s.toString()});break;case"bountyFontWeight":this.#l({"bounty-font-weight":s.toString()});break;case"bountyVerticalOffset":this.#l({"bounty-vertical-offset":s.toString()});break;case"posterShadow":this.#l({"poster-shadow":s.toString()});break;case"photoShadow":this.#l({"photo-shadow":s.toString()});break;case"name":case"bounty":case"filter":this.#l({[o]:s.toString()})}},window.addEventListener("hashchange",this.#g)}#y(){const t=this.#s.querySelector(".loading-overlay"),e=1e3,n=setInterval(()=>{if(!(new Date().getTime()-this.#m<e)){if(clearTimeout(n),t.style.transition="opacity 1s",t.style.opacity="0",setTimeout(()=>t.remove(),1e3),location.hash===F){this.#h.classList.add("criminal--visible");return}setTimeout(()=>this.#h.classList.add("criminal--visible"),1e4)}},200)}#v(){this.#w(location.hash===F)}#w(t){const e=this.#s.querySelector(".blood-overlay");if(!e)return;const n=t?"https://github.com/vshymanskyy/StandWithUkraine/blob/main/docs/README.md":"https://github.com/YuskaWu/one-piece-wanted-poster",o=document.querySelector("github-corner");o.classList.toggle("gc-ua",t),o.setAttribute("href",n),this.classList.toggle("warcriminal"),e.classList.toggle("blood-overlay--visible"),this.#h.classList.toggle("criminal--stamp"),this.#p.classList.toggle("tips-button--hidden"),this.#u.classList.toggle("optc-button--hidden"),this.#s.querySelector(".button-container")?.classList.toggle("button-container--hidden"),t&&K({...N}),this.#b(t)}#b(t){if(!t){clearInterval(this.#d);return}const e=N.photoUrls.length;let n=Math.floor(e*Math.random());K({photoUrl:N.photoUrls[n]+"#nohighlight"}),this.#d=window.setInterval(()=>{n=(n+1)%e,K({photoUrl:N.photoUrls[n]+"#nohighlight"})},5e3)}#l(t){const e=Object.keys(t);for(const n of e){const o=t[n]??"";this.#o.setAttribute(n,o)}}connectedCallback(){this.#m=new Date().getTime(),this.#l({name:u.name,bounty:u.bounty.toString(),"name-spacing":u.nameSpacing.toString(),"bounty-spacing":u.bountySpacing.toString(),"poster-shadow":u.posterShadow.toString(),"bounty-font-family":u.bountyFontFamily,"bounty-font-weight":u.bountyFontWeight.toString(),"bounty-vertical-offset":u.bountyVerticalOffset.toString(),filter:u.filter}),f("photoUrl",this.#f),f("name",this.#f),f("bounty",this.#f),f("nameSpacing",this.#f),f("bountyFontFamily",this.#f),f("bountySpacing",this.#f),f("bountyFontScale",this.#f),f("bountyFontWeight",this.#f),f("bountyVerticalOffset",this.#f),f("posterShadow",this.#f),f("photoShadow",this.#f),f("filter",this.#f),location.hash===F&&this.#w(!0),this.addEventListener("dragover",t=>{t.preventDefault()}),this.addEventListener("dragenter",()=>{this.classList.add("dragin")}),this.addEventListener("dragleave",t=>{t.relatedTarget===null&&this.classList.remove("dragin")}),this.addEventListener("drop",t=>{t.preventDefault(),this.classList.remove("dragin");const e=t.dataTransfer?.files[0];if(!e||!e.type.startsWith("image"))return;const n=URL.createObjectURL(e);u.photoUrl=n}),this.#i.addEventListener("input",()=>{const t=this.#i.files?this.#i.files[0]:null;if(!t||!t.type.startsWith("image"))return;const e=URL.createObjectURL(t);u.photoUrl=e}),this.#c.addEventListener("click",()=>{this.#t.toggle()}),this.#r.addEventListener("click",()=>{this.#i.value="",this.#i.click()}),this.#a.addEventListener("click",async()=>{if(!this.#a.loading){this.#a.loading=!0;try{await this.#o.export()}catch(t){console.error(t);let e="";t instanceof Error&&(e=t.message),alert(`Oops! something went wrong.  
 ${e}`)}finally{this.#a.loading=!1}}}),this.#h.addEventListener("click",()=>{const t=location.hash===F;location.hash=t?"":F}),this.#p.addEventListener("click",()=>{this.#n.toggle()}),this.#u.addEventListener("click",()=>{this.#e.toggle()}),Mt.setConsumer(async t=>{const e=t[0];if(!Mt.isFileHandle(e))return;const n=await e.getFile(),o=URL.createObjectURL(n);u.photoUrl=o})}}customElements.define(di,ui);
